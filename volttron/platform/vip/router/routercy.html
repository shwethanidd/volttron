<!DOCTYPE html>
<!-- Generated by Cython 0.24 -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cython: routercy.pyx</title>
    <style type="text/css">
    
body.cython { font-family: courier; font-size: 12; }

.cython.tag  {  }
.cython.line { margin: 0em }
.cython.code { font-size: 9; color: #444444; display: none; margin: 0px 0px 0px 8px; border-left: 8px none; }

.cython.line .run { background-color: #B0FFB0; }
.cython.line .mis { background-color: #FFB0B0; }
.cython.code.run  { border-left: 8px solid #B0FFB0; }
.cython.code.mis  { border-left: 8px solid #FFB0B0; }

.cython.code .py_c_api  { color: red; }
.cython.code .py_macro_api  { color: #FF7000; }
.cython.code .pyx_c_api  { color: #FF3000; }
.cython.code .pyx_macro_api  { color: #FF7000; }
.cython.code .refnanny  { color: #FFA000; }
.cython.code .trace  { color: #FFA000; }
.cython.code .error_goto  { color: #FFA000; }

.cython.code .coerce  { color: #008000; border: 1px dotted #008000 }
.cython.code .py_attr { color: #FF0000; font-weight: bold; }
.cython.code .c_attr  { color: #0000FF; }
.cython.code .py_call { color: #FF0000; font-weight: bold; }
.cython.code .c_call  { color: #0000FF; }

.cython.score-0 {background-color: #FFFFff;}
.cython.score-1 {background-color: #FFFFe7;}
.cython.score-2 {background-color: #FFFFd4;}
.cython.score-3 {background-color: #FFFFc4;}
.cython.score-4 {background-color: #FFFFb6;}
.cython.score-5 {background-color: #FFFFaa;}
.cython.score-6 {background-color: #FFFF9f;}
.cython.score-7 {background-color: #FFFF96;}
.cython.score-8 {background-color: #FFFF8d;}
.cython.score-9 {background-color: #FFFF86;}
.cython.score-10 {background-color: #FFFF7f;}
.cython.score-11 {background-color: #FFFF79;}
.cython.score-12 {background-color: #FFFF73;}
.cython.score-13 {background-color: #FFFF6e;}
.cython.score-14 {background-color: #FFFF6a;}
.cython.score-15 {background-color: #FFFF66;}
.cython.score-16 {background-color: #FFFF62;}
.cython.score-17 {background-color: #FFFF5e;}
.cython.score-18 {background-color: #FFFF5b;}
.cython.score-19 {background-color: #FFFF57;}
.cython.score-20 {background-color: #FFFF55;}
.cython.score-21 {background-color: #FFFF52;}
.cython.score-22 {background-color: #FFFF4f;}
.cython.score-23 {background-color: #FFFF4d;}
.cython.score-24 {background-color: #FFFF4b;}
.cython.score-25 {background-color: #FFFF48;}
.cython.score-26 {background-color: #FFFF46;}
.cython.score-27 {background-color: #FFFF44;}
.cython.score-28 {background-color: #FFFF43;}
.cython.score-29 {background-color: #FFFF41;}
.cython.score-30 {background-color: #FFFF3f;}
.cython.score-31 {background-color: #FFFF3e;}
.cython.score-32 {background-color: #FFFF3c;}
.cython.score-33 {background-color: #FFFF3b;}
.cython.score-34 {background-color: #FFFF39;}
.cython.score-35 {background-color: #FFFF38;}
.cython.score-36 {background-color: #FFFF37;}
.cython.score-37 {background-color: #FFFF36;}
.cython.score-38 {background-color: #FFFF35;}
.cython.score-39 {background-color: #FFFF34;}
.cython.score-40 {background-color: #FFFF33;}
.cython.score-41 {background-color: #FFFF32;}
.cython.score-42 {background-color: #FFFF31;}
.cython.score-43 {background-color: #FFFF30;}
.cython.score-44 {background-color: #FFFF2f;}
.cython.score-45 {background-color: #FFFF2e;}
.cython.score-46 {background-color: #FFFF2d;}
.cython.score-47 {background-color: #FFFF2c;}
.cython.score-48 {background-color: #FFFF2b;}
.cython.score-49 {background-color: #FFFF2b;}
.cython.score-50 {background-color: #FFFF2a;}
.cython.score-51 {background-color: #FFFF29;}
.cython.score-52 {background-color: #FFFF29;}
.cython.score-53 {background-color: #FFFF28;}
.cython.score-54 {background-color: #FFFF27;}
.cython.score-55 {background-color: #FFFF27;}
.cython.score-56 {background-color: #FFFF26;}
.cython.score-57 {background-color: #FFFF26;}
.cython.score-58 {background-color: #FFFF25;}
.cython.score-59 {background-color: #FFFF24;}
.cython.score-60 {background-color: #FFFF24;}
.cython.score-61 {background-color: #FFFF23;}
.cython.score-62 {background-color: #FFFF23;}
.cython.score-63 {background-color: #FFFF22;}
.cython.score-64 {background-color: #FFFF22;}
.cython.score-65 {background-color: #FFFF22;}
.cython.score-66 {background-color: #FFFF21;}
.cython.score-67 {background-color: #FFFF21;}
.cython.score-68 {background-color: #FFFF20;}
.cython.score-69 {background-color: #FFFF20;}
.cython.score-70 {background-color: #FFFF1f;}
.cython.score-71 {background-color: #FFFF1f;}
.cython.score-72 {background-color: #FFFF1f;}
.cython.score-73 {background-color: #FFFF1e;}
.cython.score-74 {background-color: #FFFF1e;}
.cython.score-75 {background-color: #FFFF1e;}
.cython.score-76 {background-color: #FFFF1d;}
.cython.score-77 {background-color: #FFFF1d;}
.cython.score-78 {background-color: #FFFF1c;}
.cython.score-79 {background-color: #FFFF1c;}
.cython.score-80 {background-color: #FFFF1c;}
.cython.score-81 {background-color: #FFFF1c;}
.cython.score-82 {background-color: #FFFF1b;}
.cython.score-83 {background-color: #FFFF1b;}
.cython.score-84 {background-color: #FFFF1b;}
.cython.score-85 {background-color: #FFFF1a;}
.cython.score-86 {background-color: #FFFF1a;}
.cython.score-87 {background-color: #FFFF1a;}
.cython.score-88 {background-color: #FFFF1a;}
.cython.score-89 {background-color: #FFFF19;}
.cython.score-90 {background-color: #FFFF19;}
.cython.score-91 {background-color: #FFFF19;}
.cython.score-92 {background-color: #FFFF19;}
.cython.score-93 {background-color: #FFFF18;}
.cython.score-94 {background-color: #FFFF18;}
.cython.score-95 {background-color: #FFFF18;}
.cython.score-96 {background-color: #FFFF18;}
.cython.score-97 {background-color: #FFFF17;}
.cython.score-98 {background-color: #FFFF17;}
.cython.score-99 {background-color: #FFFF17;}
.cython.score-100 {background-color: #FFFF17;}
.cython.score-101 {background-color: #FFFF16;}
.cython.score-102 {background-color: #FFFF16;}
.cython.score-103 {background-color: #FFFF16;}
.cython.score-104 {background-color: #FFFF16;}
.cython.score-105 {background-color: #FFFF16;}
.cython.score-106 {background-color: #FFFF15;}
.cython.score-107 {background-color: #FFFF15;}
.cython.score-108 {background-color: #FFFF15;}
.cython.score-109 {background-color: #FFFF15;}
.cython.score-110 {background-color: #FFFF15;}
.cython.score-111 {background-color: #FFFF15;}
.cython.score-112 {background-color: #FFFF14;}
.cython.score-113 {background-color: #FFFF14;}
.cython.score-114 {background-color: #FFFF14;}
.cython.score-115 {background-color: #FFFF14;}
.cython.score-116 {background-color: #FFFF14;}
.cython.score-117 {background-color: #FFFF14;}
.cython.score-118 {background-color: #FFFF13;}
.cython.score-119 {background-color: #FFFF13;}
.cython.score-120 {background-color: #FFFF13;}
.cython.score-121 {background-color: #FFFF13;}
.cython.score-122 {background-color: #FFFF13;}
.cython.score-123 {background-color: #FFFF13;}
.cython.score-124 {background-color: #FFFF13;}
.cython.score-125 {background-color: #FFFF12;}
.cython.score-126 {background-color: #FFFF12;}
.cython.score-127 {background-color: #FFFF12;}
.cython.score-128 {background-color: #FFFF12;}
.cython.score-129 {background-color: #FFFF12;}
.cython.score-130 {background-color: #FFFF12;}
.cython.score-131 {background-color: #FFFF12;}
.cython.score-132 {background-color: #FFFF11;}
.cython.score-133 {background-color: #FFFF11;}
.cython.score-134 {background-color: #FFFF11;}
.cython.score-135 {background-color: #FFFF11;}
.cython.score-136 {background-color: #FFFF11;}
.cython.score-137 {background-color: #FFFF11;}
.cython.score-138 {background-color: #FFFF11;}
.cython.score-139 {background-color: #FFFF11;}
.cython.score-140 {background-color: #FFFF11;}
.cython.score-141 {background-color: #FFFF10;}
.cython.score-142 {background-color: #FFFF10;}
.cython.score-143 {background-color: #FFFF10;}
.cython.score-144 {background-color: #FFFF10;}
.cython.score-145 {background-color: #FFFF10;}
.cython.score-146 {background-color: #FFFF10;}
.cython.score-147 {background-color: #FFFF10;}
.cython.score-148 {background-color: #FFFF10;}
.cython.score-149 {background-color: #FFFF10;}
.cython.score-150 {background-color: #FFFF0f;}
.cython.score-151 {background-color: #FFFF0f;}
.cython.score-152 {background-color: #FFFF0f;}
.cython.score-153 {background-color: #FFFF0f;}
.cython.score-154 {background-color: #FFFF0f;}
.cython.score-155 {background-color: #FFFF0f;}
.cython.score-156 {background-color: #FFFF0f;}
.cython.score-157 {background-color: #FFFF0f;}
.cython.score-158 {background-color: #FFFF0f;}
.cython.score-159 {background-color: #FFFF0f;}
.cython.score-160 {background-color: #FFFF0f;}
.cython.score-161 {background-color: #FFFF0e;}
.cython.score-162 {background-color: #FFFF0e;}
.cython.score-163 {background-color: #FFFF0e;}
.cython.score-164 {background-color: #FFFF0e;}
.cython.score-165 {background-color: #FFFF0e;}
.cython.score-166 {background-color: #FFFF0e;}
.cython.score-167 {background-color: #FFFF0e;}
.cython.score-168 {background-color: #FFFF0e;}
.cython.score-169 {background-color: #FFFF0e;}
.cython.score-170 {background-color: #FFFF0e;}
.cython.score-171 {background-color: #FFFF0e;}
.cython.score-172 {background-color: #FFFF0e;}
.cython.score-173 {background-color: #FFFF0d;}
.cython.score-174 {background-color: #FFFF0d;}
.cython.score-175 {background-color: #FFFF0d;}
.cython.score-176 {background-color: #FFFF0d;}
.cython.score-177 {background-color: #FFFF0d;}
.cython.score-178 {background-color: #FFFF0d;}
.cython.score-179 {background-color: #FFFF0d;}
.cython.score-180 {background-color: #FFFF0d;}
.cython.score-181 {background-color: #FFFF0d;}
.cython.score-182 {background-color: #FFFF0d;}
.cython.score-183 {background-color: #FFFF0d;}
.cython.score-184 {background-color: #FFFF0d;}
.cython.score-185 {background-color: #FFFF0d;}
.cython.score-186 {background-color: #FFFF0d;}
.cython.score-187 {background-color: #FFFF0c;}
.cython.score-188 {background-color: #FFFF0c;}
.cython.score-189 {background-color: #FFFF0c;}
.cython.score-190 {background-color: #FFFF0c;}
.cython.score-191 {background-color: #FFFF0c;}
.cython.score-192 {background-color: #FFFF0c;}
.cython.score-193 {background-color: #FFFF0c;}
.cython.score-194 {background-color: #FFFF0c;}
.cython.score-195 {background-color: #FFFF0c;}
.cython.score-196 {background-color: #FFFF0c;}
.cython.score-197 {background-color: #FFFF0c;}
.cython.score-198 {background-color: #FFFF0c;}
.cython.score-199 {background-color: #FFFF0c;}
.cython.score-200 {background-color: #FFFF0c;}
.cython.score-201 {background-color: #FFFF0c;}
.cython.score-202 {background-color: #FFFF0c;}
.cython.score-203 {background-color: #FFFF0b;}
.cython.score-204 {background-color: #FFFF0b;}
.cython.score-205 {background-color: #FFFF0b;}
.cython.score-206 {background-color: #FFFF0b;}
.cython.score-207 {background-color: #FFFF0b;}
.cython.score-208 {background-color: #FFFF0b;}
.cython.score-209 {background-color: #FFFF0b;}
.cython.score-210 {background-color: #FFFF0b;}
.cython.score-211 {background-color: #FFFF0b;}
.cython.score-212 {background-color: #FFFF0b;}
.cython.score-213 {background-color: #FFFF0b;}
.cython.score-214 {background-color: #FFFF0b;}
.cython.score-215 {background-color: #FFFF0b;}
.cython.score-216 {background-color: #FFFF0b;}
.cython.score-217 {background-color: #FFFF0b;}
.cython.score-218 {background-color: #FFFF0b;}
.cython.score-219 {background-color: #FFFF0b;}
.cython.score-220 {background-color: #FFFF0b;}
.cython.score-221 {background-color: #FFFF0b;}
.cython.score-222 {background-color: #FFFF0a;}
.cython.score-223 {background-color: #FFFF0a;}
.cython.score-224 {background-color: #FFFF0a;}
.cython.score-225 {background-color: #FFFF0a;}
.cython.score-226 {background-color: #FFFF0a;}
.cython.score-227 {background-color: #FFFF0a;}
.cython.score-228 {background-color: #FFFF0a;}
.cython.score-229 {background-color: #FFFF0a;}
.cython.score-230 {background-color: #FFFF0a;}
.cython.score-231 {background-color: #FFFF0a;}
.cython.score-232 {background-color: #FFFF0a;}
.cython.score-233 {background-color: #FFFF0a;}
.cython.score-234 {background-color: #FFFF0a;}
.cython.score-235 {background-color: #FFFF0a;}
.cython.score-236 {background-color: #FFFF0a;}
.cython.score-237 {background-color: #FFFF0a;}
.cython.score-238 {background-color: #FFFF0a;}
.cython.score-239 {background-color: #FFFF0a;}
.cython.score-240 {background-color: #FFFF0a;}
.cython.score-241 {background-color: #FFFF0a;}
.cython.score-242 {background-color: #FFFF0a;}
.cython.score-243 {background-color: #FFFF0a;}
.cython.score-244 {background-color: #FFFF0a;}
.cython.score-245 {background-color: #FFFF0a;}
.cython.score-246 {background-color: #FFFF09;}
.cython.score-247 {background-color: #FFFF09;}
.cython.score-248 {background-color: #FFFF09;}
.cython.score-249 {background-color: #FFFF09;}
.cython.score-250 {background-color: #FFFF09;}
.cython.score-251 {background-color: #FFFF09;}
.cython.score-252 {background-color: #FFFF09;}
.cython.score-253 {background-color: #FFFF09;}
.cython.score-254 {background-color: #FFFF09;}
    </style>
    <script>
    function toggleDiv(id) {
        theDiv = id.nextElementSibling
        if (theDiv.style.display != 'block') theDiv.style.display = 'block';
        else theDiv.style.display = 'none';
    }
    </script>
</head>
<body class="cython">
<p><span style="border-bottom: solid 1px grey;">Generated by Cython 0.24</span></p>
<p>
    <span style="background-color: #FFFF00">Yellow lines</span> hint at Python interaction.<br />
    Click on a line that starts with a "<code>+</code>" to see the C code that Cython generated for it.
</p>
<p>Raw output: <a href="routercy.c">routercy.c</a></p>
<div class="cython"><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">001</span>: from libcpp.string cimport string</pre>
<pre class='cython code score-11 '>  __pyx_t_3 = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_test, __pyx_t_3) &lt; 0) __PYX_ERR(0, 1, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">002</span>: from libcpp.set cimport set</pre>
<pre class="cython line score-0">&#xA0;<span class="">003</span>: from libcpp.vector cimport vector</pre>
<pre class="cython line score-0">&#xA0;<span class="">004</span>: from cython.operator cimport dereference, preincrement</pre>
<pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">005</span>: import os</pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_os, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_os, __pyx_t_1) &lt; 0) __PYX_ERR(0, 5, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">006</span>: import uuid</pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_uuid, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_uuid, __pyx_t_1) &lt; 0) __PYX_ERR(0, 6, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">007</span>: import logging</pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_logging, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_logging, __pyx_t_1) &lt; 0) __PYX_ERR(0, 7, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-19" onclick='toggleDiv(this)'>+<span class="">008</span>: from logging import handlers</pre>
<pre class='cython code score-19 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 8, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_handlers);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_handlers);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_handlers);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_logging, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_handlers); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 8, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_handlers, __pyx_t_1) &lt; 0) __PYX_ERR(0, 8, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">009</span>: import logging.config</pre>
<pre class='cython code score-8 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_logging_config, 0, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_logging, __pyx_t_2) &lt; 0) __PYX_ERR(0, 9, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">010</span>: from zmq.utils.buffers cimport asbuffer_r</pre>
<pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">011</span>: import sys</pre>
<pre class='cython code score-8 '>
  /* "volttron/platform/vip/router/routercy.pyx":11
 * import logging.config
 * from zmq.utils.buffers cimport asbuffer_r
 * import sys             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 * from zmq.utils import*
 */
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_sys, 0, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_sys, __pyx_t_2) &lt; 0) __PYX_ERR(0, 11, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">012</span>: </pre>
<pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">013</span>: from zmq.utils import*</pre>
<pre class='cython code score-11 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s__22);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s__22);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s__22);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_zmq_utils, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 13, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_import_star(__pyx_t_1) &lt; 0) __PYX_ERR(0, 13, __pyx_L1_error);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">014</span>: import zmq</pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_zmq, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_zmq, __pyx_t_1) &lt; 0) __PYX_ERR(0, 14, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-49" onclick='toggleDiv(this)'>+<span class="">015</span>: from zmq import NOBLOCK, ZMQError, EINVAL, EHOSTUNREACH</pre>
<pre class='cython code score-49 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_NOBLOCK);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_NOBLOCK);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_NOBLOCK);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_ZMQError);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_ZMQError);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_n_s_ZMQError);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_EINVAL);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_EINVAL);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 2, __pyx_n_s_EINVAL);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_EHOSTUNREACH);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_EHOSTUNREACH);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 3, __pyx_n_s_EHOSTUNREACH);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_zmq, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_NOBLOCK); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_NOBLOCK, __pyx_t_1) &lt; 0) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_ZMQError); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ZMQError, __pyx_t_1) &lt; 0) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_EINVAL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_EINVAL, __pyx_t_1) &lt; 0) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_EHOSTUNREACH); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_EHOSTUNREACH, __pyx_t_1) &lt; 0) __PYX_ERR(0, 15, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">016</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">017</span>: from cysocket cimport Socket as CySocket</pre>
<pre class="cython line score-0">&#xA0;<span class="">018</span>: #from cymessage cimport Frame as cymessage.Frame</pre>
<pre class="cython line score-0">&#xA0;<span class="">019</span>: cimport cymessage</pre>
<pre class="cython line score-0">&#xA0;<span class="">020</span>: from queue cimport Queue</pre>
<pre class="cython line score-0">&#xA0;<span class="">021</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">022</span>: </pre>
<pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">023</span>: OUTGOING = 0</pre>
<pre class='cython code score-5 '>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_OUTGOING, __pyx_int_0) &lt; 0) __PYX_ERR(0, 23, __pyx_L1_error)
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">024</span>: INCOMING = 1</pre>
<pre class='cython code score-5 '>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_INCOMING, __pyx_int_1) &lt; 0) __PYX_ERR(0, 24, __pyx_L1_error)
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">025</span>: UNROUTABLE = 2</pre>
<pre class='cython code score-5 '>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_UNROUTABLE, __pyx_int_2) &lt; 0) __PYX_ERR(0, 25, __pyx_L1_error)
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">026</span>: ERROR = 3</pre>
<pre class='cython code score-5 '>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_ERROR, __pyx_int_3) &lt; 0) __PYX_ERR(0, 26, __pyx_L1_error)
</pre><pre class="cython line score-0">&#xA0;<span class="">027</span>: </pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">028</span>: cdef class BaseRouter:</pre>
<pre class='cython code score-0 '>struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter {
  PyObject *(*run)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch);
  PyObject *(*start)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch);
  PyObject *(*stop)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch, struct __pyx_opt_args_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_stop *__pyx_optional_args);
  PyObject *(*setup)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch);
  PyObject *(*poll)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch);
  PyObject *(*handle_subsystem)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, PyObject *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*issue)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_issue *__pyx_optional_args);
  PyObject *(*_distribute)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, PyObject *, PyObject *, std::string);
  PyObject *(*_add_peer)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, std::string, int __pyx_skip_dispatch);
  PyObject *(*_drop_peer)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, std::string, int __pyx_skip_dispatch);
  PyObject *(*route)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, int __pyx_skip_dispatch);
  struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *(*_send)(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *, struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *, int __pyx_skip_dispatch);
};
static struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_vtabptr_8volttron_8platform_3vip_6router_8routercy_BaseRouter;
</pre><pre class="cython line score-0">&#xA0;<span class="">029</span>:     '''Abstract base class of VIP router implementation.</pre>
<pre class="cython line score-0">&#xA0;<span class="">030</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">031</span>:     Router implementers should inherit this class and implement the</pre>
<pre class="cython line score-0">&#xA0;<span class="">032</span>:     setup() method to bind to appropriate addresses, set identities,</pre>
<pre class="cython line score-0">&#xA0;<span class="">033</span>:     setup authentication, etc, etc. The socket will be created by the</pre>
<pre class="cython line score-0">&#xA0;<span class="">034</span>:     start() method, which will then call the setup() method.  Once</pre>
<pre class="cython line score-0">&#xA0;<span class="">035</span>:     started, the socket may be polled for incoming messages and those</pre>
<pre class="cython line score-0">&#xA0;<span class="">036</span>:     messages are handled/routed by calling the route() method.  During</pre>
<pre class="cython line score-0">&#xA0;<span class="">037</span>:     routing, the issue() method, which may be implemented, will be</pre>
<pre class="cython line score-0">&#xA0;<span class="">038</span>:     called to allow for debugging and logging. Custom subsystems may be</pre>
<pre class="cython line score-0">&#xA0;<span class="">039</span>:     implemented in the handle_subsystem() method. The socket will be</pre>
<pre class="cython line score-0">&#xA0;<span class="">040</span>:     closed when the stop() method is called.</pre>
<pre class="cython line score-0">&#xA0;<span class="">041</span>:     '''</pre>
<pre class="cython line score-0">&#xA0;<span class="">042</span>:     #_socket_class = zmq.Socket</pre>
<pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">043</span>:     _socket_class = CySocket</pre>
<pre class='cython code score-10 '>  if (<span class='py_c_api'>PyDict_SetItem</span>((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_8routercy_BaseRouter-&gt;tp_dict, __pyx_n_s_socket_class, ((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_8cysocket_Socket)) &lt; 0) __PYX_ERR(0, 43, __pyx_L1_error)
  <span class='py_c_api'>PyType_Modified</span>(__pyx_ptype_8volttron_8platform_3vip_6router_8routercy_BaseRouter);
</pre><pre class="cython line score-0">&#xA0;<span class="">044</span>: </pre>
<pre class="cython line score-42" onclick='toggleDiv(this)'>+<span class="">045</span>:     def __cinit__(self, context=None, default_user_id=None, **kwargs):</pre>
<pre class='cython code score-42 '>/* Python wrapper */
static int __pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  CYTHON_UNUSED PyObject *__pyx_v_context = 0;
  CYTHON_UNUSED PyObject *__pyx_v_default_user_id = 0;
  PyObject *__pyx_v_kwargs = 0;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__ (wrapper)", 0);
  __pyx_v_kwargs = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_v_kwargs)) return -1;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_kwargs);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_context,&amp;__pyx_n_s_default_user_id,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_context);
          if (value) { values[0] = value; kw_args--; }
        }
        case  1:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_default_user_id);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, __pyx_v_kwargs, values, pos_args, "__cinit__") &lt; 0)) __PYX_ERR(0, 45, __pyx_L3_error)
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_context = values[0];
    __pyx_v_default_user_id = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 0, 0, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 45, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs); __pyx_v_kwargs = 0;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter___cinit__(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_context, __pyx_v_default_user_id, __pyx_v_kwargs);

  /* function exit code */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_kwargs);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter___cinit__(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_context, CYTHON_UNUSED PyObject *__pyx_v_default_user_id, PyObject *__pyx_v_kwargs) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__", 0);
/* … */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">046</span>:         '''Initialize the object instance.</pre>
<pre class="cython line score-0">&#xA0;<span class="">047</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">048</span>:         If context is None (the default), the zmq global context will be</pre>
<pre class="cython line score-0">&#xA0;<span class="">049</span>:         used for socket creation.</pre>
<pre class="cython line score-0">&#xA0;<span class="">050</span>:         '''</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">051</span>:         print("BaseRouter cinit")</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_BaseRouter_cinit) &lt; 0) __PYX_ERR(0, 51, __pyx_L1_error)
</pre><pre class="cython line score-25" onclick='toggleDiv(this)'>+<span class="">052</span>:         self.context = zmq.Context.instance()</pre>
<pre class='cython code score-25 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_zmq); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 52, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_Context); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 52, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_instance); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 52, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L1_error)
  }
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;context);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;context);
  __pyx_v_self-&gt;context = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">053</span>:         if 'default_user_id' in kwargs:</pre>
<pre class='cython code score-2 '>  __pyx_t_4 = (<span class='pyx_c_api'>__Pyx_PyDict_ContainsTF</span>(__pyx_n_s_default_user_id, __pyx_v_kwargs, Py_EQ)); if (unlikely(__pyx_t_4 &lt; 0)) __PYX_ERR(0, 53, __pyx_L1_error)
  __pyx_t_5 = (__pyx_t_4 != 0);
  if (__pyx_t_5) {
/* … */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">054</span>:             self.default_user_id = kwargs['default_user_id']</pre>
<pre class='cython code score-3 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_GetItem</span>(__pyx_v_kwargs, __pyx_n_s_default_user_id); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 54, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;default_user_id);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;default_user_id);
    __pyx_v_self-&gt;default_user_id = __pyx_t_1;
    __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">055</span>:         else:</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">056</span>:             self.default_user_id = None</pre>
<pre class='cython code score-2 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    <span class='refnanny'>__Pyx_GIVEREF</span>(Py_None);
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;default_user_id);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;default_user_id);
    __pyx_v_self-&gt;default_user_id = Py_None;
  }
  __pyx_L3:;
</pre><pre class="cython line score-14" onclick='toggleDiv(this)'>+<span class="">057</span>:         self.logger = logging.getLogger('cython.baserouter')</pre>
<pre class='cython code score-14 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_getLogger); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;logger);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;logger);
  __pyx_v_self-&gt;logger = __pyx_t_1;
  __pyx_t_1 = 0;
/* … */
  __pyx_tuple_ = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_s_cython_baserouter); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 57, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple_);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple_);
</pre><pre class="cython line score-17" onclick='toggleDiv(this)'>+<span class="">058</span>:         if self.logger.level == logging.NOTSET:</pre>
<pre class='cython code score-17 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;logger, __pyx_n_s_level); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 58, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_NOTSET); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 58, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_3, Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 58, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_2); if (unlikely(__pyx_t_5 &lt; 0)) __PYX_ERR(0, 58, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_5) {
/* … */
  }
</pre><pre class="cython line score-32" onclick='toggleDiv(this)'>+<span class="">059</span>:             self.logger.setLevel(logging.DEBUG)</pre>
<pre class='cython code score-32 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;logger, __pyx_n_s_setLevel); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 59, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 59, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_DEBUG); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 59, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
      __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
      if (likely(__pyx_t_1)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      }
    }
    if (!__pyx_t_1) {
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    } else {
      __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 59, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_1); __pyx_t_1 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+1, __pyx_t_6);
      __pyx_t_6 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">060</span>:         self.OUTGOING = 0</pre>
<pre class='cython code score-0 '>  __pyx_v_self-&gt;OUTGOING = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">061</span>:         self.INCOMING = 1</pre>
<pre class='cython code score-0 '>  __pyx_v_self-&gt;INCOMING = 1;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">062</span>:         self.UNROUTABLE = 2</pre>
<pre class='cython code score-0 '>  __pyx_v_self-&gt;UNROUTABLE = 2;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">063</span>:         self.ERROR = 3</pre>
<pre class='cython code score-0 '>  __pyx_v_self-&gt;ERROR = 3;
</pre><pre class="cython line score-0">&#xA0;<span class="">064</span>: </pre>
<pre class="cython line score-33" onclick='toggleDiv(this)'>+<span class="">065</span>:     cpdef run(self):</pre>
<pre class='cython code score-33 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_3run(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_run(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("run", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_run); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_3run)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.run", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_3run(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_2run[] = "Main router loop.";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_3run(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("run (wrapper)", 0);
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_2run(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_2run(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("run", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_run(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.run", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">066</span>:         '''Main router loop.'''</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">067</span>:         print("BaseRouter run")</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_BaseRouter_run) &lt; 0) __PYX_ERR(0, 67, __pyx_L1_error)
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">068</span>:         self.start()</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;start(__pyx_v_self, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 68, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">069</span>:         try:</pre>
<pre class='cython code score-0 '>  /*try:*/ {
</pre><pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">070</span>:             while self.poll():</pre>
<pre class='cython code score-3 '>    while (1) {
      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;poll(__pyx_v_self, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 70, __pyx_L4_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_5 &lt; 0)) __PYX_ERR(0, 70, __pyx_L4_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_5) break;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">071</span>:                 self.route()</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;route(__pyx_v_self, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 71, __pyx_L4_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">072</span>:         finally:</pre>
<pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">073</span>:             print("BaseRouter stop()")</pre>
<pre class='cython code score-4 '>  /*finally:*/ {
    /*normal exit:*/{
      if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_BaseRouter_stop) &lt; 0) __PYX_ERR(0, 73, __pyx_L1_error)
/* … */
        if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_BaseRouter_stop) &lt; 0) __PYX_ERR(0, 73, __pyx_L9_error)
</pre><pre class="cython line score-21" onclick='toggleDiv(this)'>+<span class="">074</span>:             self.stop()</pre>
<pre class='cython code score-21 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;stop(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L5;
    }
    /*exception exit:*/{
      __Pyx_PyThreadState_declare
      __pyx_L4_error:;
      __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
      __Pyx_PyThreadState_assign
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (PY_MAJOR_VERSION &gt;= 3) <span class='pyx_c_api'>__Pyx_ExceptionSwap</span>(&amp;__pyx_t_12, &amp;__pyx_t_13, &amp;__pyx_t_14);
      if ((PY_MAJOR_VERSION &lt; 3) || unlikely(<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11) &lt; 0)) <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_9);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_10);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_11);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_12);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_13);
      <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_14);
      __pyx_t_6 = __pyx_lineno; __pyx_t_7 = __pyx_clineno; __pyx_t_8 = __pyx_filename;
      {
/* … */
        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;stop(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L9_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      }
      __Pyx_PyThreadState_assign
      if (PY_MAJOR_VERSION &gt;= 3) {
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_12, __pyx_t_13, __pyx_t_14);
      }
      <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_9);
      <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_10);
      <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_11);
      <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      __pyx_t_9 = 0; __pyx_t_10 = 0; __pyx_t_11 = 0; __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
      __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_7; __pyx_filename = __pyx_t_8;
      goto __pyx_L1_error;
      __pyx_L9_error:;
      __Pyx_PyThreadState_assign
      if (PY_MAJOR_VERSION &gt;= 3) {
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_12, __pyx_t_13, __pyx_t_14);
      }
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_12 = 0; __pyx_t_13 = 0; __pyx_t_14 = 0;
      goto __pyx_L1_error;
    }
    __pyx_L5:;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">075</span>: </pre>
<pre class="cython line score-35" onclick='toggleDiv(this)'>+<span class="">076</span>:     cpdef start(self):</pre>
<pre class='cython code score-35 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_5start(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_start(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_v_sock = NULL;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("start", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_start); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 76, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_5start)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 76, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 76, __pyx_L1_error)
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.start", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_sock);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_5start(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_4start[] = "Create the socket and call setup().\n\n        The socket is save in the socket attribute. The setup() method\n        is called at the end of the method to perform additional setup.\n        ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_5start(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("start (wrapper)", 0);
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_4start(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_4start(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("start", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_start(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 76, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.start", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">077</span>:         '''Create the socket and call setup().</pre>
<pre class="cython line score-0">&#xA0;<span class="">078</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">079</span>:         The socket is save in the socket attribute. The setup() method</pre>
<pre class="cython line score-0">&#xA0;<span class="">080</span>:         is called at the end of the method to perform additional setup.</pre>
<pre class="cython line score-0">&#xA0;<span class="">081</span>:         '''</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">082</span>:         print("BaseRouter start()")</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_BaseRouter_start) &lt; 0) __PYX_ERR(0, 82, __pyx_L1_error)
</pre><pre class="cython line score-36" onclick='toggleDiv(this)'>+<span class="">083</span>:         self.socket = sock = self._socket_class(self.context, zmq.ROUTER)</pre>
<pre class='cython code score-36 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_socket_class); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_zmq); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_ROUTER); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  if (__pyx_t_3) {
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
  }
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;context);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;context);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_v_self-&gt;context);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, __pyx_t_4);
  __pyx_t_4 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_8volttron_8platform_3vip_6router_8cysocket_Socket))))) __PYX_ERR(0, 83, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;socket);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;socket));
  __pyx_v_self-&gt;socket = ((struct __pyx_obj_8volttron_8platform_3vip_6router_8cysocket_Socket *)__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_sock = __pyx_t_1;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">084</span>:         sock.router_mandatory = True</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_router_mandatory, Py_True) &lt; 0) __PYX_ERR(0, 84, __pyx_L1_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">085</span>:         sock.sndtimeo = 0</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_sndtimeo, __pyx_int_0) &lt; 0) __PYX_ERR(0, 85, __pyx_L1_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">086</span>:         sock.tcp_keepalive = True</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_tcp_keepalive, Py_True) &lt; 0) __PYX_ERR(0, 86, __pyx_L1_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">087</span>:         sock.tcp_keepalive_idle = 180</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_tcp_keepalive_idle, __pyx_int_180) &lt; 0) __PYX_ERR(0, 87, __pyx_L1_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">088</span>:         sock.tcp_keepalive_intvl = 20</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_tcp_keepalive_intvl, __pyx_int_20) &lt; 0) __PYX_ERR(0, 88, __pyx_L1_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">089</span>:         sock.tcp_keepalive_cnt = 6</pre>
<pre class='cython code score-2 '>  if (<span class='pyx_c_api'>__Pyx_PyObject_SetAttrStr</span>(__pyx_v_sock, __pyx_n_s_tcp_keepalive_cnt, __pyx_int_6) &lt; 0) __PYX_ERR(0, 89, __pyx_L1_error)
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">090</span>:         self.setup()</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;setup(__pyx_v_self, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 90, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">091</span>: </pre>
<pre class="cython line score-73" onclick='toggleDiv(this)'>+<span class="">092</span>:     cpdef stop(self, int linger=1):</pre>
<pre class='cython code score-73 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_7stop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_stop(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_stop *__pyx_optional_args) {
  int __pyx_v_linger = ((int)1);
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("stop", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_linger = __pyx_optional_args-&gt;linger;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_stop); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_7stop)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_linger); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      } else {
        __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 92, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.stop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_7stop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_6stop[] = "Close the socket.";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_7stop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_linger;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("stop (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_linger,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_linger);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "stop") &lt; 0)) __PYX_ERR(0, 92, __pyx_L3_error)
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_linger = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[0]); if (unlikely((__pyx_v_linger == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 92, __pyx_L3_error)
    } else {
      __pyx_v_linger = ((int)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("stop", 0, 0, 1, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 92, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.stop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_6stop(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_linger);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_6stop(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_v_linger) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("stop", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.linger = __pyx_v_linger;
  __pyx_t_1 = __pyx_vtabptr_8volttron_8platform_3vip_6router_8routercy_BaseRouter-&gt;stop(__pyx_v_self, 1, &amp;__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.stop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">093</span>:         '''Close the socket.'''</pre>
<pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">094</span>:         self.socket.close(linger)</pre>
<pre class='cython code score-29 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self-&gt;socket), __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 94, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_linger); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 94, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_6 = NULL;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_6) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 94, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_6); __pyx_t_6 = NULL;
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+1, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">095</span>: </pre>
<pre class="cython line score-32" onclick='toggleDiv(this)'>+<span class="">096</span>:     cpdef setup(self):</pre>
<pre class='cython code score-32 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_9setup(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_setup(CYTHON_UNUSED struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_setup); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_9setup)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.setup", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_9setup(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_8setup[] = "Called from start() method to setup the socket.\n\n        Implement this method to bind the socket, set identities and\n        options, etc.\n        ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_9setup(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup (wrapper)", 0);
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_8setup(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_8setup(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("setup", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_setup(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.setup", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">097</span>:         '''Called from start() method to setup the socket.</pre>
<pre class="cython line score-0">&#xA0;<span class="">098</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">099</span>:         Implement this method to bind the socket, set identities and</pre>
<pre class="cython line score-0">&#xA0;<span class="">100</span>:         options, etc.</pre>
<pre class="cython line score-0">&#xA0;<span class="">101</span>:         '''</pre>
<pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">102</span>:         raise NotImplementedError()</pre>
<pre class='cython code score-5 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_builtin_NotImplementedError); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 102, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_1, 0, 0, 0);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(0, 102, __pyx_L1_error)
</pre><pre class="cython line score-0">&#xA0;<span class="">103</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">104</span>:     #@property</pre>
<pre class="cython line score-32" onclick='toggleDiv(this)'>+<span class="">105</span>:     cpdef poll(self):</pre>
<pre class='cython code score-32 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_11poll(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_poll(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("poll", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_poll); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 105, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_11poll)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.poll", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_11poll(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_10poll[] = "Returns the underlying socket's poll method.";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_11poll(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("poll (wrapper)", 0);
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_10poll(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_10poll(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("poll", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_poll(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 105, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.poll", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">106</span>:         '''Returns the underlying socket's poll method.'''</pre>
<pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">107</span>:         return self.socket.poll</pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self-&gt;socket), __pyx_n_s_poll); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 107, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">108</span>: </pre>
<pre class="cython line score-72" onclick='toggleDiv(this)'>+<span class="">109</span>:     cpdef object handle_subsystem(self, object frames, object user_id):</pre>
<pre class='cython code score-72 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_13handle_subsystem(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_handle_subsystem(CYTHON_UNUSED struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_frames, CYTHON_UNUSED PyObject *__pyx_v_user_id, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("handle_subsystem", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_handle_subsystem); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 109, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_13handle_subsystem)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
          __pyx_t_5 = 1;
        }
      }
      __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 109, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      if (__pyx_t_4) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_frames);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_frames);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_v_frames);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_user_id);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_user_id);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, __pyx_v_user_id);
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 109, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.handle_subsystem", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_13handle_subsystem(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_12handle_subsystem[] = "Handle additional subsystems and provide a response.\n\n        This method does nothing by default and may be implemented by\n        subclasses to provide additional subsystems.\n\n        frames is a list of zmq.Frame objects with the following\n        elements:\n\n          [SENDER, RECIPIENT, PROTOCOL, USER_ID, MSG_ID, SUBSYSTEM, ...]\n\n        The return value should be None, if the subsystem is unknown, an\n        empty list or False (or other False value) if the message was\n        handled but does not require/generate a response, or a list of\n        containing the following elements:\n\n          [RECIPIENT, SENDER, PROTOCOL, USER_ID, MSG_ID, SUBSYSTEM, ...]\n\n        ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_13handle_subsystem(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_frames = 0;
  PyObject *__pyx_v_user_id = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("handle_subsystem (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_frames,&amp;__pyx_n_s_user_id,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_frames)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_user_id)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("handle_subsystem", 1, 2, 2, 1); __PYX_ERR(0, 109, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "handle_subsystem") &lt; 0)) __PYX_ERR(0, 109, __pyx_L3_error)
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_frames = values[0];
    __pyx_v_user_id = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("handle_subsystem", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 109, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.handle_subsystem", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_12handle_subsystem(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_frames, __pyx_v_user_id);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_12handle_subsystem(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, PyObject *__pyx_v_frames, PyObject *__pyx_v_user_id) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("handle_subsystem", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_handle_subsystem(__pyx_v_self, __pyx_v_frames, __pyx_v_user_id, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 109, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.handle_subsystem", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">110</span>:     #cpdef handle_subsystem(self, frames, user_id):</pre>
<pre class="cython line score-0">&#xA0;<span class="">111</span>:         '''Handle additional subsystems and provide a response.</pre>
<pre class="cython line score-0">&#xA0;<span class="">112</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">113</span>:         This method does nothing by default and may be implemented by</pre>
<pre class="cython line score-0">&#xA0;<span class="">114</span>:         subclasses to provide additional subsystems.</pre>
<pre class="cython line score-0">&#xA0;<span class="">115</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">116</span>:         frames is a list of zmq.Frame objects with the following</pre>
<pre class="cython line score-0">&#xA0;<span class="">117</span>:         elements:</pre>
<pre class="cython line score-0">&#xA0;<span class="">118</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">119</span>:           [SENDER, RECIPIENT, PROTOCOL, USER_ID, MSG_ID, SUBSYSTEM, ...]</pre>
<pre class="cython line score-0">&#xA0;<span class="">120</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">121</span>:         The return value should be None, if the subsystem is unknown, an</pre>
<pre class="cython line score-0">&#xA0;<span class="">122</span>:         empty list or False (or other False value) if the message was</pre>
<pre class="cython line score-0">&#xA0;<span class="">123</span>:         handled but does not require/generate a response, or a list of</pre>
<pre class="cython line score-0">&#xA0;<span class="">124</span>:         containing the following elements:</pre>
<pre class="cython line score-0">&#xA0;<span class="">125</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">126</span>:           [RECIPIENT, SENDER, PROTOCOL, USER_ID, MSG_ID, SUBSYSTEM, ...]</pre>
<pre class="cython line score-0">&#xA0;<span class="">127</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">128</span>:         '''</pre>
<pre class="cython line score-0">&#xA0;<span class="">129</span>:         pass</pre>
<pre class="cython line score-0">&#xA0;<span class="">130</span>: </pre>
<pre class="cython line score-90" onclick='toggleDiv(this)'>+<span class="">131</span>:     cpdef issue(self, int topic, object frames, object extra=None):</pre>
<pre class='cython code score-90 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_15issue(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_issue(CYTHON_UNUSED struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, CYTHON_UNUSED int __pyx_v_topic, CYTHON_UNUSED PyObject *__pyx_v_frames, int __pyx_skip_dispatch, struct __pyx_opt_args_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_issue *__pyx_optional_args) {
  PyObject *__pyx_v_extra = ((PyObject *)Py_None);
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("issue", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_extra = __pyx_optional_args-&gt;extra;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_issue); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_15issue)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_topic); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 131, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
          __pyx_t_6 = 1;
        }
      }
      __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 131, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      if (__pyx_t_5) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_frames);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_frames);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_v_frames);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_extra);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_extra);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 2+__pyx_t_6, __pyx_v_extra);
      __pyx_t_3 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 131, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.issue", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_15issue(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_15issue(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_topic;
  PyObject *__pyx_v_frames = 0;
  PyObject *__pyx_v_extra = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("issue (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_topic,&amp;__pyx_n_s_frames,&amp;__pyx_n_s_extra,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_topic)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_frames)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("issue", 0, 2, 3, 1); __PYX_ERR(0, 131, __pyx_L3_error)
        }
        case  2:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_extra);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "issue") &lt; 0)) __PYX_ERR(0, 131, __pyx_L3_error)
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_topic = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[0]); if (unlikely((__pyx_v_topic == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 131, __pyx_L3_error)
    __pyx_v_frames = values[1];
    __pyx_v_extra = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("issue", 0, 2, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 131, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.issue", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_14issue(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_topic, __pyx_v_frames, __pyx_v_extra);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_14issue(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_v_topic, PyObject *__pyx_v_frames, PyObject *__pyx_v_extra) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("issue", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.extra = __pyx_v_extra;
  __pyx_t_1 = __pyx_vtabptr_8volttron_8platform_3vip_6router_8routercy_BaseRouter-&gt;issue(__pyx_v_self, __pyx_v_topic, __pyx_v_frames, 1, &amp;__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.issue", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">132</span>:         pass</pre>
<pre class="cython line score-0">&#xA0;<span class="">133</span>: </pre>
<pre class="cython line score-30" onclick='toggleDiv(this)'>+<span class="">134</span>:     if zmq.zmq_version_info() &gt;= (4, 1, 0):</pre>
<pre class='cython code score-30 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_zmq); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_zmq_version_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 134, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (__pyx_t_1) {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 134, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 134, __pyx_L1_error)
  }
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_2, __pyx_tuple__23, Py_GE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 134, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3); if (unlikely(__pyx_t_4 &lt; 0)) __PYX_ERR(0, 134, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_4) {
/* … */
    goto __pyx_L2;
  }
</pre><pre class="cython line score-48" onclick='toggleDiv(this)'>+<span class="">135</span>:         def lookup_user_id(self, sender, recipient, auth_token):</pre>
<pre class='cython code score-48 '>/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_17lookup_user_id(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_16lookup_user_id[] = "Find and return a user identifier.\n\n            Returns the UTF-8 encoded User-Id property from the sender\n            frame or None if the authenticator did not set the User-Id\n            metadata. May be extended to perform additional lookups.\n            ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_17lookup_user_id(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  CYTHON_UNUSED PyObject *__pyx_v_sender = 0;
  PyObject *__pyx_v_recipient = 0;
  CYTHON_UNUSED PyObject *__pyx_v_auth_token = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lookup_user_id (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_sender,&amp;__pyx_n_s_recipient,&amp;__pyx_n_s_auth_token,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_sender)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_recipient)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, 1); __PYX_ERR(0, 135, __pyx_L3_error)
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_auth_token)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, 2); __PYX_ERR(0, 135, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lookup_user_id") &lt; 0)) __PYX_ERR(0, 135, __pyx_L3_error)
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
    }
    __pyx_v_sender = values[0];
    __pyx_v_recipient = values[1];
    __pyx_v_auth_token = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 135, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.lookup_user_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_16lookup_user_id(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_sender, __pyx_v_recipient, __pyx_v_auth_token);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_16lookup_user_id(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_sender, PyObject *__pyx_v_recipient, CYTHON_UNUSED PyObject *__pyx_v_auth_token) {
  PyObject *__pyx_v_exc = NULL;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lookup_user_id", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.lookup_user_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_exc);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">136</span>:             '''Find and return a user identifier.</pre>
<pre class="cython line score-0">&#xA0;<span class="">137</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">138</span>:             Returns the UTF-8 encoded User-Id property from the sender</pre>
<pre class="cython line score-0">&#xA0;<span class="">139</span>:             frame or None if the authenticator did not set the User-Id</pre>
<pre class="cython line score-0">&#xA0;<span class="">140</span>:             metadata. May be extended to perform additional lookups.</pre>
<pre class="cython line score-0">&#xA0;<span class="">141</span>:             '''</pre>
<pre class="cython line score-0">&#xA0;<span class="">142</span>:             # pylint: disable=unused-argument</pre>
<pre class="cython line score-0">&#xA0;<span class="">143</span>:             # A user id might/should be set by the ZAP authenticator</pre>
<pre class="cython line score-8" onclick='toggleDiv(this)'>+<span class="">144</span>:             try:</pre>
<pre class='cython code score-8 '>  {
    /*try:*/ {
/* … */
    }
    __pyx_L3_error:;
    __Pyx_PyThreadState_assign
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
/* … */
    __Pyx_PyThreadState_assign
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L1_error;
    __pyx_L7_try_return:;
    __Pyx_PyThreadState_assign
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L0;
    __pyx_L4_exception_handled:;
    __Pyx_PyThreadState_assign
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_1);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_3);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3);
  }
</pre><pre class="cython line score-22" onclick='toggleDiv(this)'>+<span class="">145</span>:                 return recipient.get('User-Id').encode('utf-8')</pre>
<pre class='cython code score-22 '>      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_recipient, __pyx_n_s_get); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 145, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_tuple__2, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 145, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_encode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 145, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
/* … */
  __pyx_tuple__2 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_s_User_Id); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 145, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__2);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_tuple__3, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 145, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_5;
      __pyx_t_5 = 0;
      goto __pyx_L7_try_return;
  __pyx_tuple__3 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_s_utf_8); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 145, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__3);
</pre><pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">146</span>:             except ZMQError as exc:</pre>
<pre class='cython code score-10 '>    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ZMQError); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 146, __pyx_L5_except_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.lookup_user_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_5, &amp;__pyx_t_4, &amp;__pyx_t_7) &lt; 0) __PYX_ERR(0, 146, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      __pyx_v_exc = __pyx_t_4;
</pre><pre class="cython line score-17" onclick='toggleDiv(this)'>+<span class="">147</span>:                 if exc.errno != EINVAL:</pre>
<pre class='cython code score-17 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 147, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      __pyx_t_9 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_EINVAL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 147, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
      __pyx_t_10 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_8, __pyx_t_9, Py_NE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 147, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_10); if (unlikely(__pyx_t_11 &lt; 0)) __PYX_ERR(0, 147, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_10); __pyx_t_10 = 0;
      if (__pyx_t_11) {
/* … */
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L4_exception_handled;
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">148</span>:                     raise</pre>
<pre class='cython code score-2 '>        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_7);
        <span class='pyx_c_api'>__Pyx_ErrRestoreWithState</span>(__pyx_t_5, __pyx_t_4, __pyx_t_7);
        __pyx_t_5 = 0; __pyx_t_4 = 0; __pyx_t_7 = 0; 
        __PYX_ERR(0, 148, __pyx_L5_except_error)
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">149</span>:             return self.default_user_id</pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;default_user_id);
  __pyx_r = __pyx_v_self-&gt;default_user_id;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">150</span>:     else:</pre>
<pre class="cython line score-39" onclick='toggleDiv(this)'>+<span class="">151</span>:         def lookup_user_id(self, sender, recipient, auth_token):</pre>
<pre class='cython code score-39 '>/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_19lookup_user_id(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_18lookup_user_id[] = "Find and return a user identifier.\n\n            A no-op by default, this method must be overridden to map\n            the sender and auth_token to a user ID. The returned value\n            must be a string or None (if the token was not found).\n            ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_19lookup_user_id(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  CYTHON_UNUSED PyObject *__pyx_v_sender = 0;
  CYTHON_UNUSED PyObject *__pyx_v_recipient = 0;
  CYTHON_UNUSED PyObject *__pyx_v_auth_token = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lookup_user_id (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_sender,&amp;__pyx_n_s_recipient,&amp;__pyx_n_s_auth_token,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_sender)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_recipient)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, 1); __PYX_ERR(0, 151, __pyx_L3_error)
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_auth_token)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, 2); __PYX_ERR(0, 151, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lookup_user_id") &lt; 0)) __PYX_ERR(0, 151, __pyx_L3_error)
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
    }
    __pyx_v_sender = values[0];
    __pyx_v_recipient = values[1];
    __pyx_v_auth_token = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lookup_user_id", 1, 3, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); __PYX_ERR(0, 151, __pyx_L3_error)
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.lookup_user_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_18lookup_user_id(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), __pyx_v_sender, __pyx_v_recipient, __pyx_v_auth_token);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_18lookup_user_id(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_sender, CYTHON_UNUSED PyObject *__pyx_v_recipient, CYTHON_UNUSED PyObject *__pyx_v_auth_token) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lookup_user_id", 0);
/* … */
  /* function exit code */
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  /*else*/ {
  }
  __pyx_L2:;
</pre><pre class="cython line score-0">&#xA0;<span class="">152</span>:             '''Find and return a user identifier.</pre>
<pre class="cython line score-0">&#xA0;<span class="">153</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">154</span>:             A no-op by default, this method must be overridden to map</pre>
<pre class="cython line score-0">&#xA0;<span class="">155</span>:             the sender and auth_token to a user ID. The returned value</pre>
<pre class="cython line score-0">&#xA0;<span class="">156</span>:             must be a string or None (if the token was not found).</pre>
<pre class="cython line score-0">&#xA0;<span class="">157</span>:             '''</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">158</span>:             return self.default_user_id</pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;default_user_id);
  __pyx_r = __pyx_v_self-&gt;default_user_id;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">159</span>: </pre>
<pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">160</span>:     cdef _distribute(self, bytes subsys, bytes cmd, string peer):</pre>
<pre class='cython code score-11 '>static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__distribute(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, PyObject *__pyx_v_subsys, PyObject *__pyx_v_cmd, std::string __pyx_v_peer) {
  std::set&lt;std::string&gt;  __pyx_v_drop;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_empty = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_frames = 0;
  CYTHON_UNUSED std::string __pyx_v_pr;
  std::set&lt;std::string&gt; ::iterator __pyx_v_end;
  std::set&lt;std::string&gt; ::iterator __pyx_v_it;
  std::vector&lt;std::string&gt;  __pyx_v_peerlist;
  std::vector&lt;std::string&gt; ::iterator __pyx_v_it1;
  std::set&lt;std::string&gt; ::iterator __pyx_v_dit;
  char *__pyx_v_subsys_data;
  Py_ssize_t __pyx_v_data_len_c;
  char *__pyx_v_cmd_data;
  char *__pyx_v_peer_data;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_vipframe = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_sysdata = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_cmdata = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_prdata = 0;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_distribute", 0);
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._distribute", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_empty);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_frames);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_vipframe);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sysdata);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_cmdata);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_prdata);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">161</span>:         cdef:</pre>
<pre class="cython line score-0">&#xA0;<span class="">162</span>:             set[string] drop</pre>
<pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">163</span>:             cymessage.Frame empty = cymessage.Frame(&lt;char*&gt;'')</pre>
<pre class='cython code score-11 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyBytes_FromString</span>(((char *)((char *)""))); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 163, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 163, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 163, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_empty = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">164</span>:             Queue frames = Queue()</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 164, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_frames = ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">165</span>:             #object frames = [empty, empty, Frame(b'VIP1'), empty, empty]</pre>
<pre class="cython line score-0">&#xA0;<span class="">166</span>:             string pr</pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">167</span>:             set[string].iterator end = self._peers.end()</pre>
<pre class='cython code score-0 '>  __pyx_v_end = __pyx_v_self-&gt;_peers.end();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">168</span>:             set[string].iterator it = self._peers.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_it = __pyx_v_self-&gt;_peers.begin();
</pre><pre class="cython line score-0">&#xA0;<span class="">169</span>:             vector[string] peerlist</pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">170</span>:             vector[string].iterator it1 = peerlist.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_it1 = __pyx_v_peerlist.begin();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">171</span>:             set[string].iterator dit = drop.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_dit = __pyx_v_drop.begin();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">172</span>:             char* subsys_data = NULL</pre>
<pre class='cython code score-0 '>  __pyx_v_subsys_data = NULL;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">173</span>:             Py_ssize_t data_len_c=0</pre>
<pre class='cython code score-0 '>  __pyx_v_data_len_c = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">174</span>:             char* cmd_data = NULL</pre>
<pre class='cython code score-0 '>  __pyx_v_cmd_data = NULL;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">175</span>:             char* peer_data = NULL</pre>
<pre class='cython code score-0 '>  __pyx_v_peer_data = NULL;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">176</span>:             cymessage.Frame vipframe = cymessage.Frame(b'VIP')</pre>
<pre class='cython code score-7 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 176, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_vipframe = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
  __pyx_t_1 = 0;
/* … */
  __pyx_tuple__4 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_VIP); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 176, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__4);
</pre><pre class="cython line score-0">&#xA0;<span class="">177</span>:             cymessage.Frame sysdata, cmdata, prdata</pre>
<pre class="cython line score-0">&#xA0;<span class="">178</span>: </pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">179</span>:         frames.append(&lt;void*&gt;empty)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_empty)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 179, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">180</span>:         frames.append(&lt;void*&gt;empty)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_empty)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 180, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">181</span>:         frames.append(&lt;void*&gt;vipframe)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_vipframe)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">182</span>:         frames.append(&lt;void*&gt;empty)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_empty)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 182, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">183</span>:         frames.append(&lt;void*&gt;empty)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_empty)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 183, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">184</span>:         asbuffer_r(subsys, &lt;void **&gt;&amp;subsys_data, &amp;data_len_c)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_f_3zmq_5utils_7buffers_asbuffer_r(__pyx_v_subsys, ((void **)(&amp;__pyx_v_subsys_data)), (&amp;__pyx_v_data_len_c)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 184, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">185</span>:         asbuffer_r(cmd, &lt;void **&gt;&amp;cmd_data, &amp;data_len_c)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = __pyx_f_3zmq_5utils_7buffers_asbuffer_r(__pyx_v_cmd, ((void **)(&amp;__pyx_v_cmd_data)), (&amp;__pyx_v_data_len_c)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">186</span>:         asbuffer_r(peer, &lt;void **&gt;&amp;peer_data, &amp;data_len_c)</pre>
<pre class='cython code score-4 '>  __pyx_t_1 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_peer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 186, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = __pyx_f_3zmq_5utils_7buffers_asbuffer_r(__pyx_t_1, ((void **)(&amp;__pyx_v_peer_data)), (&amp;__pyx_v_data_len_c)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 186, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">187</span>:         sysdata = cymessage.Frame(subsys_data)</pre>
<pre class='cython code score-11 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyBytes_FromString</span>(__pyx_v_subsys_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 187, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 187, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_sysdata = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">188</span>:         cmdata = cymessage.Frame(cmd_data)</pre>
<pre class='cython code score-11 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyBytes_FromString</span>(__pyx_v_cmd_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 188, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 188, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_cmdata = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">189</span>:         prdata = cymessage.Frame(peer_data)</pre>
<pre class='cython code score-11 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyBytes_FromString</span>(__pyx_v_peer_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 189, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 189, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_prdata = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">190</span>: </pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">191</span>:         frames.append(&lt;void*&gt;sysdata)</pre>
<pre class='cython code score-1 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sysdata)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 191, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">192</span>:         frames.append(&lt;void*&gt;cmdata)</pre>
<pre class='cython code score-1 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_cmdata)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 192, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">193</span>:         frames.append(&lt;void*&gt;prdata)</pre>
<pre class='cython code score-1 '>  __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_prdata)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 193, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">194</span>:         #frames.extend(Frame(f) for f in parts)</pre>
<pre class="cython line score-0">&#xA0;<span class="">195</span>:         #Send frames to all peers and drop it later</pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">196</span>:         while(it != end):</pre>
<pre class='cython code score-0 '>  while (1) {
    __pyx_t_3 = ((__pyx_v_it != __pyx_v_end) != 0);
    if (!__pyx_t_3) break;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">197</span>:             pr = dereference(it)</pre>
<pre class='cython code score-0 '>    __pyx_v_pr = (*__pyx_v_it);
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">198</span>:             frames[0] = peer</pre>
<pre class='cython code score-5 '>    __pyx_t_2 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_peer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 198, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (unlikely(<span class='pyx_c_api'>__Pyx_SetItemInt</span>(((PyObject *)__pyx_v_frames), 0, __pyx_t_2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1) &lt; 0)) __PYX_ERR(0, 198, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">199</span>:             peerlist = self._send(frames)</pre>
<pre class='cython code score-6 '>    __pyx_t_2 = ((PyObject *)((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_send(__pyx_v_self, __pyx_v_frames, 0)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 199, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_4 = __pyx_convert_vector_from_py_std_3a__3a_string(__pyx_t_2); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 199, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_peerlist = __pyx_t_4;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">200</span>:             it1 = peerlist.begin()</pre>
<pre class='cython code score-0 '>    __pyx_v_it1 = __pyx_v_peerlist.begin();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">201</span>:             while(it1 != peerlist.end()):</pre>
<pre class='cython code score-0 '>    while (1) {
      __pyx_t_3 = ((__pyx_v_it1 != __pyx_v_peerlist.end()) != 0);
      if (!__pyx_t_3) break;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">202</span>:                 drop.insert(dereference(it1))</pre>
<pre class='cython code score-0 '>      try {
        __pyx_v_drop.insert((*__pyx_v_it1));
      } catch(...) {
        __Pyx_CppExn2PyErr();
        __PYX_ERR(0, 202, __pyx_L1_error)
      }
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">203</span>:                 preincrement(it1)</pre>
<pre class='cython code score-0 '>      (++__pyx_v_it1);
    }
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">204</span>:             preincrement(it)</pre>
<pre class='cython code score-0 '>    (++__pyx_v_it);
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">205</span>: </pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">206</span>:         dit = drop.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_dit = __pyx_v_drop.begin();
</pre><pre class="cython line score-0">&#xA0;<span class="">207</span>: </pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">208</span>:         while(dit != drop.end()):</pre>
<pre class='cython code score-0 '>  while (1) {
    __pyx_t_3 = ((__pyx_v_dit != __pyx_v_drop.end()) != 0);
    if (!__pyx_t_3) break;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">209</span>:             peer = dereference(dit)</pre>
<pre class='cython code score-0 '>    __pyx_v_peer = (*__pyx_v_dit);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">210</span>:             self._drop_peer(peer)</pre>
<pre class='cython code score-1 '>    __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_drop_peer(__pyx_v_self, __pyx_v_peer, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 210, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">211</span>:             preincrement(dit)</pre>
<pre class='cython code score-0 '>    (++__pyx_v_dit);
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">212</span>: </pre>
<pre class="cython line score-54" onclick='toggleDiv(this)'>+<span class="">213</span>:     cpdef _add_peer(self, string peer):</pre>
<pre class='cython code score-54 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_21_add_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__add_peer(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, std::string __pyx_v_peer, int __pyx_skip_dispatch) {
  CYTHON_UNUSED std::set&lt;std::string&gt; ::iterator __pyx_v_end;
  CYTHON_UNUSED std::set&lt;std::string&gt; ::iterator __pyx_v_it;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_add_peer", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_add_peer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 213, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_21_add_peer)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_3 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_peer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 213, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      } else {
        __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 213, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._add_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_21_add_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer); /*proto*/
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_21_add_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer) {
  std::string __pyx_v_peer;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_add_peer (wrapper)", 0);
  assert(__pyx_arg_peer); {
    __pyx_v_peer = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_arg_peer); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 213, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._add_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_20_add_peer(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), ((std::string)__pyx_v_peer));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_20_add_peer(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, std::string __pyx_v_peer) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_add_peer", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__add_peer(__pyx_v_self, __pyx_v_peer, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 213, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._add_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">214</span>:         cdef:</pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">215</span>:             set[string].iterator end = self._peers.end()</pre>
<pre class='cython code score-0 '>  __pyx_v_end = __pyx_v_self-&gt;_peers.end();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">216</span>:             set[string].iterator it = self._peers.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_it = __pyx_v_self-&gt;_peers.begin();
</pre><pre class="cython line score-0">&#xA0;<span class="">217</span>: </pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">218</span>:         if(self._peers.find(peer) == self._peers.end()):</pre>
<pre class='cython code score-0 '>  __pyx_t_7 = ((__pyx_v_self-&gt;_peers.find(__pyx_v_peer) == __pyx_v_self-&gt;_peers.end()) != 0);
  if (__pyx_t_7) {
/* … */
  }
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">219</span>:             return</pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    goto __pyx_L0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">220</span>:         self._distribute(b'peerlist', b'add', peer)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_distribute(__pyx_v_self, __pyx_n_b_peerlist, __pyx_n_b_add, __pyx_v_peer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 220, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">221</span>:         self._peers.insert(peer)</pre>
<pre class='cython code score-0 '>  try {
    __pyx_v_self-&gt;_peers.insert(__pyx_v_peer);
  } catch(...) {
    __Pyx_CppExn2PyErr();
    __PYX_ERR(0, 221, __pyx_L1_error)
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">222</span>: </pre>
<pre class="cython line score-54" onclick='toggleDiv(this)'>+<span class="">223</span>:     cpdef _drop_peer(self, string peer):</pre>
<pre class='cython code score-54 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_23_drop_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__drop_peer(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, std::string __pyx_v_peer, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_drop_peer", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_drop_peer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 223, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_23_drop_peer)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_3 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_peer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 223, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 223, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      } else {
        __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 223, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 223, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._drop_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_23_drop_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer); /*proto*/
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_23_drop_peer(PyObject *__pyx_v_self, PyObject *__pyx_arg_peer) {
  std::string __pyx_v_peer;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_drop_peer (wrapper)", 0);
  assert(__pyx_arg_peer); {
    __pyx_v_peer = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_arg_peer); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 223, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._drop_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_22_drop_peer(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), ((std::string)__pyx_v_peer));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_22_drop_peer(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, std::string __pyx_v_peer) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_drop_peer", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__drop_peer(__pyx_v_self, __pyx_v_peer, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 223, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._drop_peer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">224</span>:         if (self._peers.find(peer) == self._peers.end()):</pre>
<pre class='cython code score-0 '>  __pyx_t_7 = ((__pyx_v_self-&gt;_peers.find(__pyx_v_peer) == __pyx_v_self-&gt;_peers.end()) != 0);
  if (__pyx_t_7) {
/* … */
  }
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">225</span>:             self._peers.erase(self._peers.find(peer))</pre>
<pre class='cython code score-0 '>    __pyx_v_self-&gt;_peers.erase(__pyx_v_self-&gt;_peers.find(__pyx_v_peer));
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">226</span>:         self._distribute(b'peerlist', b'drop', peer)</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_distribute(__pyx_v_self, __pyx_n_b_peerlist, __pyx_n_b_drop, __pyx_v_peer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 226, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">227</span>: </pre>
<pre class="cython line score-58" onclick='toggleDiv(this)'>+<span class="">228</span>:     cpdef route(self):</pre>
<pre class='cython code score-58 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_25route(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_route(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, int __pyx_skip_dispatch) {
  struct __pyx_obj_8volttron_8platform_3vip_6router_8cysocket_Socket *__pyx_v_socket = 0;
  PyObject *__pyx_v_issue = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_frames = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_sender = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_recipient = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_proto = 0;
  CYTHON_UNUSED struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_auth_token = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_msg_id = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_name = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_hello = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_welcome = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_ping = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_pong = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_temp = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_ver = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_err = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_errnum = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_errmsg = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_subsystem = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_opr = 0;
  std::vector&lt;std::string&gt;  __pyx_v_peerlist;
  std::vector&lt;std::string&gt; ::iterator __pyx_v_it;
  std::string __pyx_v_peer;
  PyObject *__pyx_v_op = NULL;
  PyObject *__pyx_v_listing = NULL;
  PyObject *__pyx_v_error = NULL;
  PyObject *__pyx_v_response = NULL;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("route", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_route); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 228, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_25route)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 228, __pyx_L1_error)
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 228, __pyx_L1_error)
      }
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.route", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_socket);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_issue);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_frames);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sender);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_recipient);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_proto);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_auth_token);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_msg_id);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_name);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_hello);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_welcome);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_ping);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_pong);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_temp);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_ver);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_err);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_errnum);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_errmsg);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_subsystem);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_opr);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_op);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_listing);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_error);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_response);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_25route(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_24route[] = "Route one message and return.\n\n        One message is read from the socket and processed. If the\n        recipient is the router (empty recipient), the standard hello\n        and ping subsystems are handled. Other subsystems are sent to\n        handle_subsystem() for processing. Messages destined for other\n        entities are routed appropriately.\n        ";
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_25route(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("route (wrapper)", 0);
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_24route(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_24route(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("route", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_route(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 228, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.route", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">229</span>:         '''Route one message and return.</pre>
<pre class="cython line score-0">&#xA0;<span class="">230</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">231</span>:         One message is read from the socket and processed. If the</pre>
<pre class="cython line score-0">&#xA0;<span class="">232</span>:         recipient is the router (empty recipient), the standard hello</pre>
<pre class="cython line score-0">&#xA0;<span class="">233</span>:         and ping subsystems are handled. Other subsystems are sent to</pre>
<pre class="cython line score-0">&#xA0;<span class="">234</span>:         handle_subsystem() for processing. Messages destined for other</pre>
<pre class="cython line score-0">&#xA0;<span class="">235</span>:         entities are routed appropriately.</pre>
<pre class="cython line score-0">&#xA0;<span class="">236</span>:         '''</pre>
<pre class="cython line score-0">&#xA0;<span class="">237</span>:         cdef:</pre>
<pre class="cython line score-0">&#xA0;<span class="">238</span>:             CySocket socket</pre>
<pre class="cython line score-0">&#xA0;<span class="">239</span>:             object issue</pre>
<pre class="cython line score-0">&#xA0;<span class="">240</span>:             #object frames</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">241</span>:             Queue frames = Queue()</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 241, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_frames = ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">242</span>:             cdef cymessage.Frame sender, recipient, proto, auth_token, msg_id, name</pre>
<pre class="cython line score-0">&#xA0;<span class="">243</span>:             cdef cymessage.Frame hello, welcome, ping, pong, temp, ver, err, errnum</pre>
<pre class="cython line score-0">&#xA0;<span class="">244</span>:             cdef cymessage.Frame errmsg, subsystem, opr</pre>
<pre class="cython line score-0">&#xA0;<span class="">245</span>:             vector[string] peerlist</pre>
<pre class="cython line score-0">&#xA0;<span class="">246</span>:             vector[string].iterator it</pre>
<pre class="cython line score-0">&#xA0;<span class="">247</span>:             string peer</pre>
<pre class="cython line score-0">&#xA0;<span class="">248</span>: </pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">249</span>:         socket = self.socket</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;socket);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_socket = ((struct __pyx_obj_8volttron_8platform_3vip_6router_8cysocket_Socket *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">250</span>:         issue = self.issue</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_issue); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 250, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_issue = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">251</span>:         # Expecting incoming frames:</pre>
<pre class="cython line score-0">&#xA0;<span class="">252</span>:         #   [SENDER, RECIPIENT, PROTO, USER_ID, MSG_ID, SUBSYS, ...]</pre>
<pre class="cython line score-19" onclick='toggleDiv(this)'>+<span class="">253</span>:         frames = socket.recv_multipart(copy=False)</pre>
<pre class='cython code score-19 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_socket), __pyx_n_s_recv_multipart); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 253, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 253, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_copy, Py_False) &lt; 0) __PYX_ERR(0, 253, __pyx_L1_error)
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 253, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue))))) __PYX_ERR(0, 253, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_frames, ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_3));
  __pyx_t_3 = 0;
</pre><pre class="cython line score-27" onclick='toggleDiv(this)'>+<span class="">254</span>:         issue(self.INCOMING, frames)</pre>
<pre class='cython code score-27 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;INCOMING); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 254, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
  __pyx_t_1 = __pyx_v_issue; __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
      __pyx_t_5 = 1;
    }
  }
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 254, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  if (__pyx_t_4) {
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
  }
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, ((PyObject *)__pyx_v_frames));
  __pyx_t_2 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_6, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 254, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-27" onclick='toggleDiv(this)'>+<span class="">255</span>:         if frames.size() &lt; 6:</pre>
<pre class='cython code score-27 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_size); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 255, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = NULL;
  if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_6)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  if (__pyx_t_6) {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 255, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 255, __pyx_L1_error)
  }
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_int_6, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 255, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_7 &lt; 0)) __PYX_ERR(0, 255, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {
/* … */
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">256</span>:             # Cannot route if there are insufficient frames, such as</pre>
<pre class="cython line score-0">&#xA0;<span class="">257</span>:             # might happen with a router probe.</pre>
<pre class="cython line score-0">&#xA0;<span class="">258</span>:             #if len(frames) == 2 and frames[0] and not frames[1]:</pre>
<pre class="cython line score-34" onclick='toggleDiv(this)'>+<span class="">259</span>:             if frames.size() == 2 and frames[0] and not frames[1]:</pre>
<pre class='cython code score-34 '>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_size); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_6 = NULL;
    if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
      __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
      if (likely(__pyx_t_6)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      }
    }
    if (__pyx_t_6) {
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    } else {
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)
    }
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_EqObjC</span>(__pyx_t_1, __pyx_int_2, 2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3); if (unlikely(__pyx_t_8 &lt; 0)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_7 = __pyx_t_8;
      goto __pyx_L5_bool_binop_done;
    }
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_frames), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3); if (unlikely(__pyx_t_8 &lt; 0)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_7 = __pyx_t_8;
      goto __pyx_L5_bool_binop_done;
    }
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_frames), 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3); if (unlikely(__pyx_t_8 &lt; 0)) __PYX_ERR(0, 259, __pyx_L1_error)
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_9 = ((!__pyx_t_8) != 0);
    __pyx_t_7 = __pyx_t_9;
    __pyx_L5_bool_binop_done:;
    if (__pyx_t_7) {
/* … */
      goto __pyx_L4;
    }
</pre><pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">260</span>:                 issue(self.UNROUTABLE, frames, 'router probe')</pre>
<pre class='cython code score-29 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;UNROUTABLE); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 260, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
      __pyx_t_6 = __pyx_v_issue; __pyx_t_2 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_6))) {
        __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_6);
        if (likely(__pyx_t_2)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_6);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_6, function);
          __pyx_t_5 = 1;
        }
      }
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 260, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      if (__pyx_t_2) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_5, __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_5, ((PyObject *)__pyx_v_frames));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_s_router_probe);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_s_router_probe);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2+__pyx_t_5, __pyx_kp_s_router_probe);
      __pyx_t_1 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_6, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 260, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
</pre><pre class="cython line score-14" onclick='toggleDiv(this)'>+<span class="">261</span>:                 self._add_peer(frames[0].bytes)</pre>
<pre class='cython code score-14 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_frames), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 261, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_bytes); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 261, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_10 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_6); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 261, __pyx_L1_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_add_peer(__pyx_v_self, __pyx_t_10, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 261, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">262</span>:             else:</pre>
<pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">263</span>:                 issue(self.UNROUTABLE, frames, 'too few frames')</pre>
<pre class='cython code score-29 '>    /*else*/ {
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;UNROUTABLE); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 263, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
      __pyx_t_4 = __pyx_v_issue; __pyx_t_1 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
        __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
          __pyx_t_5 = 1;
        }
      }
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 263, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      if (__pyx_t_1) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_5, __pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_5, ((PyObject *)__pyx_v_frames));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_s_too_few_frames);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_s_too_few_frames);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2+__pyx_t_5, __pyx_kp_s_too_few_frames);
      __pyx_t_3 = 0;
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_2, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 263, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    }
    __pyx_L4:;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">264</span>:             return</pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">265</span>: </pre>
<pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">266</span>:         sender = &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 266, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_sender = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">267</span>:         recipient = &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 267, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_recipient = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">268</span>:         proto= &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 268, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_proto = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">269</span>:         auth_token= &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 269, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_auth_token = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">270</span>:         msg_id = &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 270, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_msg_id = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">271</span>: </pre>
<pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">272</span>:         if proto.bytes() != b'VIP1':</pre>
<pre class='cython code score-3 '>  __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_proto-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_proto); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 272, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_7 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(__pyx_t_6, __pyx_n_b_VIP1, Py_NE)); if (unlikely(__pyx_t_7 &lt; 0)) __PYX_ERR(0, 272, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  if (__pyx_t_7) {
/* … */
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">273</span>:             # Peer is not talking a protocol we understand</pre>
<pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">274</span>:             issue(self.UNROUTABLE, frames, 'bad VIP signature')</pre>
<pre class='cython code score-29 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;UNROUTABLE); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 274, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
    __pyx_t_2 = __pyx_v_issue; __pyx_t_3 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
      __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
      if (likely(__pyx_t_3)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
        __pyx_t_5 = 1;
      }
    }
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 274, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0+__pyx_t_5, __pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1+__pyx_t_5, ((PyObject *)__pyx_v_frames));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_kp_s_bad_VIP_signature);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_kp_s_bad_VIP_signature);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 2+__pyx_t_5, __pyx_kp_s_bad_VIP_signature);
    __pyx_t_4 = 0;
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_1, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 274, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">275</span>:             return</pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    goto __pyx_L0;
</pre><pre class="cython line score-9" onclick='toggleDiv(this)'>+<span class="">276</span>:         self._add_peer(sender.bytes())</pre>
<pre class='cython code score-9 '>  __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_sender-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_sender); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 276, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_10 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_6); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 276, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_add_peer(__pyx_v_self, __pyx_t_10, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 276, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">277</span>:         subsystem = &lt;cymessage.Frame&gt;frames.pop()</pre>
<pre class='cython code score-6 '>  __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 277, __pyx_L1_error)
  __pyx_t_6 = ((PyObject *)__pyx_t_11);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
  __pyx_v_subsystem = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
  __pyx_t_6 = 0;
</pre><pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">278</span>:         if not recipient.bytes():</pre>
<pre class='cython code score-3 '>  __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_recipient-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_recipient); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 278, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_6); if (unlikely(__pyx_t_7 &lt; 0)) __PYX_ERR(0, 278, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_9 = ((!__pyx_t_7) != 0);
  if (__pyx_t_9) {
/* … */
    goto __pyx_L9;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">279</span>:             # Handle requests directed at the router</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">280</span>:             name = subsystem.bytes()</pre>
<pre class='cython code score-2 '>    __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_subsystem-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_subsystem); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 280, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    if (!(likely(((__pyx_t_6) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_6, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 280, __pyx_L1_error)
    __pyx_v_name = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
    __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">281</span>:             if name == b'hello':</pre>
<pre class='cython code score-2 '>    __pyx_t_9 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(((PyObject *)__pyx_v_name), __pyx_n_b_hello, Py_EQ)); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 281, __pyx_L1_error)
    if (__pyx_t_9) {
/* … */
      goto __pyx_L10;
    }
</pre><pre class="cython line score-0">&#xA0;<span class="">282</span>:                 #frames.clear()???</pre>
<pre class="cython line score-0">&#xA0;<span class="">283</span>:                 #frames = [sender, recipient, proto, user_id, msg_id,</pre>
<pre class="cython line score-0">&#xA0;<span class="">284</span>:                 #          b'hello', b'welcome', b'1.0', socket.identity, sender]</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">285</span>:                 frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 285, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">286</span>:                 frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 286, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">287</span>:                 frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 287, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">288</span>:                 frames.append(&lt;void*&gt;user_id)</pre>
<pre class='cython code score-4 '>      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_user_id); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 288, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_t_6)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 288, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">289</span>:                 frames.append(&lt;void*&gt;msg_id)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_msg_id)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 289, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">290</span>:                 hello = cymessage.Frame(b'hello')</pre>
<pre class='cython code score-7 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 290, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_v_hello = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
      __pyx_t_2 = 0;
/* … */
  __pyx_tuple__5 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_hello); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 290, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__5);
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">291</span>:                 welcome =cymessage.Frame(b'welcome')</pre>
<pre class='cython code score-7 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 291, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_v_welcome = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
      __pyx_t_2 = 0;
/* … */
  __pyx_tuple__6 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_welcome); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 291, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__6);
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">292</span>:                 ver = cymessage.Frame(b'1.0')</pre>
<pre class='cython code score-7 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__7, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 292, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_v_ver = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
      __pyx_t_2 = 0;
/* … */
  __pyx_tuple__7 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_b_1_0); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 292, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__7);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">293</span>:                 frames.append(&lt;void*&gt;hello)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_hello)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">294</span>:                 frames.append(&lt;void*&gt;welcome)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_welcome)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 294, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">295</span>:                 frames.append(&lt;void*&gt;ver)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_ver)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 295, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">296</span>:                 #frames.append(socket.identity) #To check</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">297</span>:                 frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 297, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">298</span>:             elif name == b'ping':</pre>
<pre class='cython code score-2 '>    __pyx_t_9 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(((PyObject *)__pyx_v_name), __pyx_n_b_ping, Py_EQ)); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 298, __pyx_L1_error)
    if (__pyx_t_9) {
/* … */
      goto __pyx_L10;
    }
</pre><pre class="cython line score-0">&#xA0;<span class="">299</span>:                 #frames.clear() ??</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">300</span>:                 frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 300, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">301</span>:                 frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 301, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">302</span>:                 frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>      __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 302, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">303</span>:                 frames.append(&lt;void*&gt;user_id)</pre>
<pre class='cython code score-4 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_user_id); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 303, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_t_2)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 303, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">304</span>:                 frames.append(&lt;void*&gt;msg_id)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_msg_id)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 304, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">305</span>:                 ping = cymessage.Frame(b'ping')</pre>
<pre class='cython code score-7 '>      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__8, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 305, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      __pyx_v_ping = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
      __pyx_t_6 = 0;
/* … */
  __pyx_tuple__8 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_ping); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 305, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__8);
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">306</span>:                 pong = cymessage.Frame(b'pong')</pre>
<pre class='cython code score-7 '>      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 306, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      __pyx_v_pong = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
      __pyx_t_6 = 0;
/* … */
  __pyx_tuple__9 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_pong); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 306, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__9);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">307</span>:                 frames.append(&lt;void*&gt;ping)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_ping)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 307, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">308</span>:                 frames.append(&lt;void*&gt;pong)</pre>
<pre class='cython code score-1 '>      __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_pong)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 308, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">309</span>:             elif name == b'peerlist':</pre>
<pre class='cython code score-2 '>    __pyx_t_9 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(((PyObject *)__pyx_v_name), __pyx_n_b_peerlist, Py_EQ)); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 309, __pyx_L1_error)
    if (__pyx_t_9) {
/* … */
      goto __pyx_L10;
    }
</pre><pre class="cython line score-12" onclick='toggleDiv(this)'>+<span class="">310</span>:                 try:</pre>
<pre class='cython code score-12 '>      {
        /*try:*/ {
/* … */
        }
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_12); __pyx_t_12 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
        goto __pyx_L18_try_end;
        __pyx_L11_error:;
        __Pyx_PyThreadState_assign
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
/* … */
        __Pyx_PyThreadState_assign
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_12, __pyx_t_13, __pyx_t_14);
        goto __pyx_L1_error;
        __pyx_L12_exception_handled:;
        __Pyx_PyThreadState_assign
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_12, __pyx_t_13, __pyx_t_14);
        __pyx_L18_try_end:;
      }
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">311</span>:                     opr = &lt;cymessage.Frame&gt; frames.pop()</pre>
<pre class='cython code score-6 '>          __pyx_t_11 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;pop(__pyx_v_frames); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 311, __pyx_L11_error)
          __pyx_t_6 = ((PyObject *)__pyx_t_11);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
          __pyx_v_opr = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_6);
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">312</span>:                     op = opr.bytes()</pre>
<pre class='cython code score-0 '>          __pyx_t_6 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_opr-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_opr); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 312, __pyx_L11_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          __pyx_v_op = __pyx_t_6;
          __pyx_t_6 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">313</span>:                     #op = frames[6].bytes</pre>
<pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">314</span>:                 except IndexError:</pre>
<pre class='cython code score-6 '>        __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_builtin_IndexError);
        if (__pyx_t_15) {
          <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter.route", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_6, &amp;__pyx_t_2, &amp;__pyx_t_1) &lt; 0) __PYX_ERR(0, 314, __pyx_L13_except_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">315</span>:                     op = None</pre>
<pre class='cython code score-5 '>          <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_op, Py_None);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          goto __pyx_L12_exception_handled;
        }
        goto __pyx_L13_except_error;
        __pyx_L13_except_error:;
</pre><pre class="cython line score-0">&#xA0;<span class="">316</span>:                 #frames.clear() ??</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">317</span>:                 frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">318</span>:                 frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 318, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">319</span>:                 frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 319, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">320</span>:                 temp = cymessage.Frame(b'')</pre>
<pre class='cython code score-7 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__11, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 320, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_v_temp = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
      __pyx_t_1 = 0;
/* … */
  __pyx_tuple__11 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_b__10); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 320, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__11);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__11);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">321</span>:                 frames.append(&lt;void*&gt;temp)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_temp)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 321, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">322</span>:                 frames.append(&lt;void*&gt;msg_id)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_msg_id)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 322, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">323</span>:                 frames.append(&lt;void*&gt;subsystem)</pre>
<pre class='cython code score-1 '>      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_subsystem)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 323, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">324</span>:                 if op == b'list':</pre>
<pre class='cython code score-2 '>      __pyx_t_9 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(__pyx_v_op, __pyx_n_b_list, Py_EQ)); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 324, __pyx_L1_error)
      if (__pyx_t_9) {
/* … */
        goto __pyx_L21;
      }
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">325</span>:                     listing = cymessage.Frame(b'listing')</pre>
<pre class='cython code score-7 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 325, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_v_listing = __pyx_t_1;
        __pyx_t_1 = 0;
/* … */
  __pyx_tuple__12 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_listing); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 325, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__12);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__12);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">326</span>:                     frames.append(&lt;void*&gt;listing)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_listing)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 326, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">327</span>:                     frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 327, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">328</span>:                     frames.append(&lt;void*&gt;listing)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_listing)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 328, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-27" onclick='toggleDiv(this)'>+<span class="">329</span>:                     frames.extend(self._peers) #???</pre>
<pre class='cython code score-27 '>        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_extend); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 329, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        __pyx_t_6 = __pyx_convert_set_to_py_std_3a__3a_string(__pyx_v_self-&gt;_peers); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 329, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
        __pyx_t_4 = NULL;
        if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
          __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
          if (likely(__pyx_t_4)) {
            PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
          }
        }
        if (!__pyx_t_4) {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 329, __pyx_L1_error)
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        } else {
          __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 329, __pyx_L1_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4); __pyx_t_4 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+1, __pyx_t_6);
          __pyx_t_6 = 0;
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 329, __pyx_L1_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">330</span>:                 else:</pre>
<pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">331</span>:                     error = (b'unknown' if op else b'missing') + b' operation'</pre>
<pre class='cython code score-10 '>      /*else*/ {
        __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_op); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 331, __pyx_L1_error)
        if (__pyx_t_9) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_b_unknown);
          __pyx_t_1 = __pyx_n_b_unknown;
        } else {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_b_missing);
          __pyx_t_1 = __pyx_n_b_missing;
        }
        __pyx_t_2 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_kp_b_operation); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 331, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_v_error = __pyx_t_2;
        __pyx_t_2 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">332</span>:                     err = cymessage.Frame(b'error')</pre>
<pre class='cython code score-7 '>        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 332, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        __pyx_v_err = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
        __pyx_t_2 = 0;
/* … */
  __pyx_tuple__13 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_error); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 332, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__13);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__13);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">333</span>:                     frames.append(&lt;void*&gt;err)</pre>
<pre class='cython code score-1 '>        __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_err)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 333, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">334</span>:                     frames.append(&lt;void*&gt;error)</pre>
<pre class='cython code score-1 '>        __pyx_t_2 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_error)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 334, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L21:;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">335</span>:             elif name == b'error':</pre>
<pre class='cython code score-2 '>    __pyx_t_9 = (<span class='pyx_c_api'>__Pyx_PyBytes_Equals</span>(((PyObject *)__pyx_v_name), __pyx_n_b_error, Py_EQ)); if (unlikely(__pyx_t_9 &lt; 0)) __PYX_ERR(0, 335, __pyx_L1_error)
    if (__pyx_t_9) {
/* … */
    }
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">336</span>:                 return</pre>
<pre class='cython code score-2 '>      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
      goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">337</span>:             else:</pre>
<pre class="cython line score-3" onclick='toggleDiv(this)'>+<span class="">338</span>:                 response = self.handle_subsystem(frames, user_id)</pre>
<pre class='cython code score-3 '>    /*else*/ {
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_user_id); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 338, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;handle_subsystem(__pyx_v_self, ((PyObject *)__pyx_v_frames), __pyx_t_2, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 338, __pyx_L1_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_v_response = __pyx_t_1;
      __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">339</span>:                 if response is None:</pre>
<pre class='cython code score-0 '>      __pyx_t_9 = (__pyx_v_response == Py_None);
      __pyx_t_7 = (__pyx_t_9 != 0);
      if (__pyx_t_7) {
/* … */
        goto __pyx_L22;
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">340</span>:                     # Handler does not know of the subsystem</pre>
<pre class="cython line score-53" onclick='toggleDiv(this)'>+<span class="">341</span>:                     errnum, errmsg = error = _INVALID_SUBSYSTEM</pre>
<pre class='cython code score-53 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_INVALID_SUBSYSTEM); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 341, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))) {
          PyObject* sequence = __pyx_t_1;
          #if CYTHON_COMPILING_IN_CPYTHON
          Py_ssize_t size = Py_SIZE(sequence);
          #else
          Py_ssize_t size = <span class='py_c_api'>PySequence_Size</span>(sequence);
          #endif
          if (unlikely(size != 2)) {
            if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
            else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
            __PYX_ERR(0, 341, __pyx_L1_error)
          }
          #if CYTHON_COMPILING_IN_CPYTHON
          if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
            __pyx_t_2 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
            __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
          } else {
            __pyx_t_2 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
            __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
          }
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          #else
          __pyx_t_2 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 341, __pyx_L1_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          __pyx_t_3 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 341, __pyx_L1_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          #endif
        } else {
          Py_ssize_t index = -1;
          __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 341, __pyx_L1_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
          __pyx_t_16 = Py_TYPE(__pyx_t_6)-&gt;tp_iternext;
          index = 0; __pyx_t_2 = __pyx_t_16(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L23_unpacking_failed;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          index = 1; __pyx_t_3 = __pyx_t_16(__pyx_t_6); if (unlikely(!__pyx_t_3)) goto __pyx_L23_unpacking_failed;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_16(__pyx_t_6), 2) &lt; 0) __PYX_ERR(0, 341, __pyx_L1_error)
          __pyx_t_16 = NULL;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          goto __pyx_L24_unpacking_done;
          __pyx_L23_unpacking_failed:;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
          __pyx_t_16 = NULL;
          if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
          __PYX_ERR(0, 341, __pyx_L1_error)
          __pyx_L24_unpacking_done:;
        }
        if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 341, __pyx_L1_error)
        if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 341, __pyx_L1_error)
        __pyx_v_errnum = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_v_errmsg = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_3);
        __pyx_t_3 = 0;
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        __pyx_v_error = __pyx_t_1;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">342</span>:                     issue(self.ERROR, frames, error)</pre>
<pre class='cython code score-29 '>        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;ERROR); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 342, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
        __pyx_t_2 = __pyx_v_issue; __pyx_t_6 = NULL;
        __pyx_t_5 = 0;
        if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
          __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
          if (likely(__pyx_t_6)) {
            PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
            __pyx_t_5 = 1;
          }
        }
        __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 342, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        if (__pyx_t_6) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_5, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_5, ((PyObject *)__pyx_v_frames));
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_error);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_error);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2+__pyx_t_5, __pyx_v_error);
        __pyx_t_3 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 342, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-19" onclick='toggleDiv(this)'>+<span class="">343</span>:                     frames.clear()</pre>
<pre class='cython code score-19 '>        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_clear); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 343, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        __pyx_t_4 = NULL;
        if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
          __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
          if (likely(__pyx_t_4)) {
            PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
          }
        }
        if (__pyx_t_4) {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 343, __pyx_L1_error)
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        } else {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 343, __pyx_L1_error)
        }
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">344</span>:                     frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 344, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">345</span>:                     frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 345, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">346</span>:                     frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 346, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">347</span>:                     temp = cymessage.Frame(b'')</pre>
<pre class='cython code score-7 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__14, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 347, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_v_temp = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
        __pyx_t_1 = 0;
/* … */
  __pyx_tuple__14 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_kp_b__10); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 347, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__14);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__14);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">348</span>:                     frames.append(&lt;void*&gt;temp)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_temp)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 348, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">349</span>:                     frames.append(&lt;void*&gt;msg_id)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_msg_id)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 349, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">350</span>:                     err = cymessage.Frame(b'error')</pre>
<pre class='cython code score-7 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__15, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 350, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_v_err = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
        __pyx_t_1 = 0;
/* … */
  __pyx_tuple__15 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_error); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 350, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__15);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__15);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">351</span>:                     frames.append(&lt;void*&gt;err)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_err)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 351, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">352</span>:                     frames.append(&lt;void*&gt;errnum)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_errnum)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">353</span>:                     frames.append(&lt;void*&gt;errmsg)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_errmsg)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 353, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">354</span>:                     frames.append(&lt;void*&gt;temp)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_temp)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 354, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">355</span>:                     frames.append(&lt;void*&gt;subsystem)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_subsystem)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 355, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">356</span>:                 elif not response:</pre>
<pre class='cython code score-2 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_response); if (unlikely(__pyx_t_7 &lt; 0)) __PYX_ERR(0, 356, __pyx_L1_error)
      __pyx_t_9 = ((!__pyx_t_7) != 0);
      if (__pyx_t_9) {
/* … */
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">357</span>:                     # Subsystem does not require a response</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">358</span>:                     return</pre>
<pre class='cython code score-2 '>        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
        __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
        goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">359</span>:                 else:</pre>
<pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">360</span>:                     frames = response</pre>
<pre class='cython code score-4 '>      /*else*/ {
        if (!(likely(((__pyx_v_response) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_v_response, __pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue))))) __PYX_ERR(0, 360, __pyx_L1_error)
        __pyx_t_1 = __pyx_v_response;
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_frames, ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_1));
        __pyx_t_1 = 0;
      }
      __pyx_L22:;
    }
    __pyx_L10:;
</pre><pre class="cython line score-0">&#xA0;<span class="">361</span>:         else:</pre>
<pre class="cython line score-0">&#xA0;<span class="">362</span>:             # Route all other requests to the recipient</pre>
<pre class="cython line score-0">&#xA0;<span class="">363</span>:             #frames.clear()</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">364</span>:             frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>  /*else*/ {
    __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 364, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">365</span>:             frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>    __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 365, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">366</span>:             frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>    __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 366, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
  __pyx_L9:;
</pre><pre class="cython line score-0">&#xA0;<span class="">367</span>: </pre>
<pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">368</span>:         peerlist = self._send(frames)</pre>
<pre class='cython code score-6 '>  __pyx_t_1 = ((PyObject *)((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_send(__pyx_v_self, __pyx_v_frames, 0)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 368, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_17 = __pyx_convert_vector_from_py_std_3a__3a_string(__pyx_t_1); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 368, __pyx_L1_error)
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_peerlist = __pyx_t_17;
</pre><pre class="cython line score-0">&#xA0;<span class="">369</span>: </pre>
<pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">370</span>:         it = peerlist.begin()</pre>
<pre class='cython code score-0 '>  __pyx_v_it = __pyx_v_peerlist.begin();
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">371</span>:         while(it != peerlist.end()):</pre>
<pre class='cython code score-0 '>  while (1) {
    __pyx_t_9 = ((__pyx_v_it != __pyx_v_peerlist.end()) != 0);
    if (!__pyx_t_9) break;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">372</span>:             peer = dereference(it)</pre>
<pre class='cython code score-0 '>    __pyx_v_peer = (*__pyx_v_it);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">373</span>:             self._drop_peer(peer)</pre>
<pre class='cython code score-1 '>    __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_drop_peer(__pyx_v_self, __pyx_v_peer, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 373, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">374</span>:             preincrement(it)</pre>
<pre class='cython code score-0 '>    (++__pyx_v_it);
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">375</span>: </pre>
<pre class="cython line score-68" onclick='toggleDiv(this)'>+<span class="">376</span>:     cpdef Queue _send(self, Queue frames):</pre>
<pre class='cython code score-68 '>static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_27_send(PyObject *__pyx_v_self, PyObject *__pyx_v_frames); /*proto*/
static struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__send(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_frames, int __pyx_skip_dispatch) {
  PyObject *__pyx_v_issue = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_8cysocket_Socket *__pyx_v_socket = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_recipient = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_sender = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_proto = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_user_id = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_msg_id = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_subsystem = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_erno = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_ermsg = 0;
  struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *__pyx_v_err = 0;
  std::string __pyx_v_errmsg;
  std::string __pyx_v_errnum;
  struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_drop = 0;
  CYTHON_UNUSED struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_send_frames = 0;
  PyObject *__pyx_v_sendr = 0;
  PyObject *__pyx_v_rec = 0;
  PyObject *__pyx_v_exc = NULL;
  PyObject *__pyx_v_error = NULL;
  struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_send", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_send); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 376, __pyx_L1_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_27_send)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, ((PyObject *)__pyx_v_frames)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 376, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      } else {
        __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 376, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+1, ((PyObject *)__pyx_v_frames));
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 376, __pyx_L1_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue))))) __PYX_ERR(0, 376, __pyx_L1_error)
      __pyx_r = ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_2);
      __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_21);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_23);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_27);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_28);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_issue);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_socket);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_recipient);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sender);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_proto);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_user_id);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_msg_id);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_subsystem);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_erno);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_ermsg);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_err);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_drop);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_send_frames);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_sendr);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_rec);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_exc);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_error);
  <span class='refnanny'>__Pyx_XGIVEREF</span>((PyObject *)__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_27_send(PyObject *__pyx_v_self, PyObject *__pyx_v_frames); /*proto*/
static PyObject *__pyx_pw_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_27_send(PyObject *__pyx_v_self, PyObject *__pyx_v_frames) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_send (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_frames), __pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue, 1, "frames", 0))) __PYX_ERR(0, 376, __pyx_L1_error)
  __pyx_r = __pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_26_send(((struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *)__pyx_v_self), ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_8volttron_8platform_3vip_6router_8routercy_10BaseRouter_26_send(struct __pyx_obj_8volttron_8platform_3vip_6router_8routercy_BaseRouter *__pyx_v_self, struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *__pyx_v_frames) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_send", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_8volttron_8platform_3vip_6router_8routercy_10BaseRouter__send(__pyx_v_self, __pyx_v_frames, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 376, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">377</span>:         cdef:</pre>
<pre class="cython line score-0">&#xA0;<span class="">378</span>:             object issue</pre>
<pre class="cython line score-0">&#xA0;<span class="">379</span>:             CySocket socket</pre>
<pre class="cython line score-0">&#xA0;<span class="">380</span>:             cymessage.Frame recipient, sender, proto, user_id, msg_id, subsystem</pre>
<pre class="cython line score-0">&#xA0;<span class="">381</span>:             cymessage.Frame erno, ermsg, err</pre>
<pre class="cython line score-0">&#xA0;<span class="">382</span>:             string errmsg, errnum</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">383</span>:             Queue drop = Queue()</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 383, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_drop = ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">384</span>:             Queue send_frames = Queue()</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_5queue_Queue), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 384, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_send_frames = ((struct __pyx_obj_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">385</span>:             bytes sendr, rec</pre>
<pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">386</span>:         issue = self.issue</pre>
<pre class='cython code score-2 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_issue); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 386, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_issue = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">387</span>:         socket = self.socket</pre>
<pre class='cython code score-1 '>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;socket);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_socket = ((struct __pyx_obj_8volttron_8platform_3vip_6router_8cysocket_Socket *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">388</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">389</span>:         #recipient, sender = frames[:2]</pre>
<pre class="cython line score-12" onclick='toggleDiv(this)'>+<span class="">390</span>:         recipient = frames.at(0)</pre>
<pre class='cython code score-12 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_at); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 390, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_tuple__16, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 390, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 390, __pyx_L1_error)
  __pyx_v_recipient = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_2);
  __pyx_t_2 = 0;
/* … */
  __pyx_tuple__16 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_0); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 390, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__16);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__16);
</pre><pre class="cython line score-12" onclick='toggleDiv(this)'>+<span class="">391</span>:         sender = frames.at(1)</pre>
<pre class='cython code score-12 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_frames), __pyx_n_s_at); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 391, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_tuple__17, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 391, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 391, __pyx_L1_error)
  __pyx_v_sender = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_1);
  __pyx_t_1 = 0;
/* … */
  __pyx_tuple__17 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_1); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 391, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__17);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__17);
</pre><pre class="cython line score-0">&#xA0;<span class="">392</span>:         # Expecting outgoing frames:</pre>
<pre class="cython line score-0">&#xA0;<span class="">393</span>:         #   [RECIPIENT, SENDER, PROTO, USER_ID, MSG_ID, SUBSYS, ...]</pre>
<pre class="cython line score-12" onclick='toggleDiv(this)'>+<span class="">394</span>:         try:</pre>
<pre class='cython code score-12 '>  {
    /*try:*/ {
/* … */
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L10_try_end;
    __pyx_L3_error:;
    __Pyx_PyThreadState_assign
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
/* … */
    __Pyx_PyThreadState_assign
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_6);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_7);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_6, __pyx_t_7, __pyx_t_8);
    goto __pyx_L1_error;
    __pyx_L4_exception_handled:;
    __Pyx_PyThreadState_assign
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_6);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_7);
    <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_8);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_6, __pyx_t_7, __pyx_t_8);
    __pyx_L10_try_end:;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">395</span>:             # Try sending the message to its recipient</pre>
<pre class="cython line score-33" onclick='toggleDiv(this)'>+<span class="">396</span>:             socket.send_multipart(frames, flags=NOBLOCK, copy=False)</pre>
<pre class='cython code score-33 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_socket), __pyx_n_s_send_multipart); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_v_frames));
      __pyx_t_3 = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_NOBLOCK); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_flags, __pyx_t_5) &lt; 0) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_copy, Py_False) &lt; 0) __PYX_ERR(0, 396, __pyx_L3_error)
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-27" onclick='toggleDiv(this)'>+<span class="">397</span>:             issue(self.OUTGOING, frames)</pre>
<pre class='cython code score-27 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;OUTGOING); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 397, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
      __pyx_t_2 = __pyx_v_issue; __pyx_t_1 = NULL;
      __pyx_t_9 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
        __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
        if (likely(__pyx_t_1)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
          __pyx_t_9 = 1;
        }
      }
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 397, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      if (__pyx_t_1) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_9, __pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_9, ((PyObject *)__pyx_v_frames));
      __pyx_t_3 = 0;
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 397, __pyx_L3_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">398</span>:         except ZMQError as exc:</pre>
<pre class='cython code score-10 '>    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ZMQError); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 398, __pyx_L5_except_error)
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_10) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_5, &amp;__pyx_t_2, &amp;__pyx_t_4) &lt; 0) __PYX_ERR(0, 398, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      __pyx_v_exc = __pyx_t_2;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">399</span>:             try:</pre>
<pre class='cython code score-11 '>      {
        /*try:*/ {
/* … */
        }
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_12); __pyx_t_12 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
        goto __pyx_L20_try_end;
        __pyx_L13_error:;
        __Pyx_PyThreadState_assign
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
/* … */
        __Pyx_PyThreadState_assign
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_11);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_11, __pyx_t_12, __pyx_t_13);
        goto __pyx_L5_except_error;
        __pyx_L14_exception_handled:;
        __Pyx_PyThreadState_assign
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_11);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
        <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_11, __pyx_t_12, __pyx_t_13);
        __pyx_L20_try_end:;
      }
</pre><pre class="cython line score-74" onclick='toggleDiv(this)'>+<span class="">400</span>:                 errnum, errmsg = error = _ROUTE_ERRORS[exc.errno]</pre>
<pre class='cython code score-74 '>          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ROUTE_ERRORS); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 400, __pyx_L13_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 400, __pyx_L13_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_14 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 400, __pyx_L13_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_14))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_14))) {
            PyObject* sequence = __pyx_t_14;
            #if CYTHON_COMPILING_IN_CPYTHON
            Py_ssize_t size = Py_SIZE(sequence);
            #else
            Py_ssize_t size = <span class='py_c_api'>PySequence_Size</span>(sequence);
            #endif
            if (unlikely(size != 2)) {
              if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
              else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
              __PYX_ERR(0, 400, __pyx_L13_error)
            }
            #if CYTHON_COMPILING_IN_CPYTHON
            if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
              __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
              __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
            } else {
              __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
              __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
            }
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
            #else
            __pyx_t_1 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 400, __pyx_L13_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
            __pyx_t_3 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 400, __pyx_L13_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            #endif
          } else {
            Py_ssize_t index = -1;
            __pyx_t_15 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_14); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 400, __pyx_L13_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
            __pyx_t_16 = Py_TYPE(__pyx_t_15)-&gt;tp_iternext;
            index = 0; __pyx_t_1 = __pyx_t_16(__pyx_t_15); if (unlikely(!__pyx_t_1)) goto __pyx_L21_unpacking_failed;
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
            index = 1; __pyx_t_3 = __pyx_t_16(__pyx_t_15); if (unlikely(!__pyx_t_3)) goto __pyx_L21_unpacking_failed;
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_16(__pyx_t_15), 2) &lt; 0) __PYX_ERR(0, 400, __pyx_L13_error)
            __pyx_t_16 = NULL;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
            goto __pyx_L22_unpacking_done;
            __pyx_L21_unpacking_failed:;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
            __pyx_t_16 = NULL;
            if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
            __PYX_ERR(0, 400, __pyx_L13_error)
            __pyx_L22_unpacking_done:;
          }
          __pyx_t_17 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_1); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 400, __pyx_L13_error)
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_18 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_3); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 400, __pyx_L13_error)
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_v_errnum = __pyx_t_17;
          __pyx_v_errmsg = __pyx_t_18;
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_14);
          __pyx_v_error = __pyx_t_14;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">401</span>:             except KeyError:</pre>
<pre class='cython code score-6 '>        __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_builtin_KeyError);
        if (__pyx_t_10) {
          <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_14, &amp;__pyx_t_3, &amp;__pyx_t_1) &lt; 0) __PYX_ERR(0, 401, __pyx_L15_except_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">402</span>:                 error = None</pre>
<pre class='cython code score-5 '>          <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_error, Py_None);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          goto __pyx_L14_exception_handled;
        }
        goto __pyx_L15_except_error;
        __pyx_L15_except_error:;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">403</span>:             if error is None:</pre>
<pre class='cython code score-0 '>      __pyx_t_19 = (__pyx_v_error == Py_None);
      __pyx_t_20 = (__pyx_t_19 != 0);
      if (__pyx_t_20) {
/* … */
      }
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">404</span>:                 raise</pre>
<pre class='cython code score-2 '>        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
        <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_4);
        <span class='pyx_c_api'>__Pyx_ErrRestoreWithState</span>(__pyx_t_5, __pyx_t_2, __pyx_t_4);
        __pyx_t_5 = 0; __pyx_t_2 = 0; __pyx_t_4 = 0; 
        __PYX_ERR(0, 404, __pyx_L5_except_error)
</pre><pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">405</span>:             issue(ERROR, frames, error)</pre>
<pre class='cython code score-29 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ERROR); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 405, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
      __pyx_t_14 = __pyx_v_issue; __pyx_t_15 = NULL;
      __pyx_t_9 = 0;
      if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_14))) {
        __pyx_t_15 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_14);
        if (likely(__pyx_t_15)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_14);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_15);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_14, function);
          __pyx_t_9 = 1;
        }
      }
      __pyx_t_21 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_9); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 405, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
      if (__pyx_t_15) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_15); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 0, __pyx_t_15); __pyx_t_15 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 0+__pyx_t_9, __pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 1+__pyx_t_9, ((PyObject *)__pyx_v_frames));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_error);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_error);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 2+__pyx_t_9, __pyx_v_error);
      __pyx_t_3 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_14, __pyx_t_21, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 405, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-14" onclick='toggleDiv(this)'>+<span class="">406</span>:             if exc.errno == EHOSTUNREACH:</pre>
<pre class='cython code score-14 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 406, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_EHOSTUNREACH); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 406, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
      __pyx_t_21 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_14, Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_21); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 406, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_21); if (unlikely(__pyx_t_20 &lt; 0)) __PYX_ERR(0, 406, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
      if (__pyx_t_20) {
/* … */
      }
</pre><pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">407</span>:                 rec = recipient.bytes()</pre>
<pre class='cython code score-10 '>        __pyx_t_21 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_recipient-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_recipient); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 407, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
        if (!(likely(<span class='py_c_api'>PyBytes_CheckExact</span>(__pyx_t_21))||((__pyx_t_21) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "bytes", Py_TYPE(__pyx_t_21)-&gt;tp_name), 0))) __PYX_ERR(0, 407, __pyx_L5_except_error)
        __pyx_v_rec = ((PyObject*)__pyx_t_21);
        __pyx_t_21 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">408</span>:                 drop.append(&lt;void*&gt;rec)</pre>
<pre class='cython code score-1 '>        __pyx_t_21 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_drop-&gt;__pyx_vtab)-&gt;append(__pyx_v_drop, ((void *)__pyx_v_rec)); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 408, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">409</span>: </pre>
<pre class="cython line score-20" onclick='toggleDiv(this)'>+<span class="">410</span>:             if exc.errno != EHOSTUNREACH or sender is not frames[0]:</pre>
<pre class='cython code score-20 '>      __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 410, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_EHOSTUNREACH); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 410, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_21, __pyx_t_14, Py_NE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 410, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_19 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_19 &lt; 0)) __PYX_ERR(0, 410, __pyx_L5_except_error)
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_19) {
      } else {
        __pyx_t_20 = __pyx_t_19;
        goto __pyx_L28_bool_binop_done;
      }
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_frames), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 410, __pyx_L5_except_error)
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_19 = (((PyObject *)__pyx_v_sender) != __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_22 = (__pyx_t_19 != 0);
      __pyx_t_20 = __pyx_t_22;
      __pyx_L28_bool_binop_done:;
      if (__pyx_t_20) {
/* … */
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      goto __pyx_L4_exception_handled;
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;
</pre><pre class="cython line score-0">&#xA0;<span class="">411</span>:                 # Only send errors if the sender and recipient differ</pre>
<pre class="cython line score-67" onclick='toggleDiv(this)'>+<span class="">412</span>:                 proto, user_id, msg_id, subsystem = frames[2:6]</pre>
<pre class='cython code score-67 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetSlice</span>(((PyObject *)__pyx_v_frames), 2, 6, NULL, NULL, &amp;__pyx_slice__18, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 412, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))) {
          PyObject* sequence = __pyx_t_1;
          #if CYTHON_COMPILING_IN_CPYTHON
          Py_ssize_t size = Py_SIZE(sequence);
          #else
          Py_ssize_t size = <span class='py_c_api'>PySequence_Size</span>(sequence);
          #endif
          if (unlikely(size != 4)) {
            if (size &gt; 4) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(4);
            else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
            __PYX_ERR(0, 412, __pyx_L5_except_error)
          }
          #if CYTHON_COMPILING_IN_CPYTHON
          if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
            __pyx_t_14 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
            __pyx_t_21 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
            __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
            __pyx_t_15 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 3); 
          } else {
            __pyx_t_14 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
            __pyx_t_21 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
            __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
            __pyx_t_15 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 3); 
          }
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_14);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_21);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_15);
          #else
          {
            Py_ssize_t i;
            PyObject** temps[4] = {&amp;__pyx_t_14,&amp;__pyx_t_21,&amp;__pyx_t_3,&amp;__pyx_t_15};
            for (i=0; i &lt; 4; i++) {
              PyObject* item = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 412, __pyx_L5_except_error)
              <span class='refnanny'>__Pyx_GOTREF</span>(item);
              *(temps[i]) = item;
            }
          }
          #endif
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        } else {
          Py_ssize_t index = -1;
          PyObject** temps[4] = {&amp;__pyx_t_14,&amp;__pyx_t_21,&amp;__pyx_t_3,&amp;__pyx_t_15};
          __pyx_t_23 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1); if (unlikely(!__pyx_t_23)) __PYX_ERR(0, 412, __pyx_L5_except_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_23);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_16 = Py_TYPE(__pyx_t_23)-&gt;tp_iternext;
          for (index=0; index &lt; 4; index++) {
            PyObject* item = __pyx_t_16(__pyx_t_23); if (unlikely(!item)) goto __pyx_L30_unpacking_failed;
            <span class='refnanny'>__Pyx_GOTREF</span>(item);
            *(temps[index]) = item;
          }
          if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_16(__pyx_t_23), 4) &lt; 0) __PYX_ERR(0, 412, __pyx_L5_except_error)
          __pyx_t_16 = NULL;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
          goto __pyx_L31_unpacking_done;
          __pyx_L30_unpacking_failed:;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
          __pyx_t_16 = NULL;
          if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
          __PYX_ERR(0, 412, __pyx_L5_except_error)
          __pyx_L31_unpacking_done:;
        }
        if (!(likely(((__pyx_t_14) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_14, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 412, __pyx_L5_except_error)
        if (!(likely(((__pyx_t_21) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_21, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 412, __pyx_L5_except_error)
        if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 412, __pyx_L5_except_error)
        if (!(likely(((__pyx_t_15) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_15, __pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame))))) __PYX_ERR(0, 412, __pyx_L5_except_error)
        __pyx_v_proto = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_14);
        __pyx_t_14 = 0;
        __pyx_v_user_id = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_21);
        __pyx_t_21 = 0;
        __pyx_v_msg_id = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_v_subsystem = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_15);
        __pyx_t_15 = 0;
/* … */
  __pyx_slice__18 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None); if (unlikely(!__pyx_slice__18)) __PYX_ERR(0, 412, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__18);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__18);
</pre><pre class="cython line score-0">&#xA0;<span class="">413</span>:                 #frames = [sender, b'', proto, user_id, msg_id,</pre>
<pre class="cython line score-0">&#xA0;<span class="">414</span>:                 #          b'error', errnum, errmsg, recipient, subsystem]</pre>
<pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">415</span>:                 frames.append(&lt;void*&gt;sender)</pre>
<pre class='cython code score-1 '>        __pyx_t_1 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_sender)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 415, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-4" onclick='toggleDiv(this)'>+<span class="">416</span>:                 frames.append(&lt;void*&gt;empty)</pre>
<pre class='cython code score-4 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_empty); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 416, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_t_1)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 416, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">417</span>:                 frames.append(&lt;void*&gt;proto)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_proto)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 417, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">418</span>:                 frames.append(&lt;void*&gt;user_id)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_user_id)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 418, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">419</span>:                 frames.append(&lt;void*&gt;msg_id)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_msg_id)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 419, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-7" onclick='toggleDiv(this)'>+<span class="">420</span>:                 err = cymessage.Frame(b'error')</pre>
<pre class='cython code score-7 '>        __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_tuple__19, NULL); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 420, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        __pyx_v_err = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_15);
        __pyx_t_15 = 0;
/* … */
  __pyx_tuple__19 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_n_b_error); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 420, __pyx_L1_error)
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__19);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__19);
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">421</span>:                 frames.append(&lt;void*&gt;err)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_err)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 421, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">422</span>:                 erno = cymessage.Frame(errnum)</pre>
<pre class='cython code score-11 '>        __pyx_t_15 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_errnum); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 422, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 422, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_15);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_15);
        __pyx_t_15 = 0;
        __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_1, NULL); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 422, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_v_erno = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_15);
        __pyx_t_15 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">423</span>:                 ermsg = cymessage.Frame(errmsg)</pre>
<pre class='cython code score-11 '>        __pyx_t_15 = <span class='pyx_c_api'>__pyx_convert_PyBytes_string_to_py_std__in_string</span>(__pyx_v_errmsg); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 423, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 423, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_15);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_15);
        __pyx_t_15 = 0;
        __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_ptype_8volttron_8platform_3vip_6router_9cymessage_Frame), __pyx_t_1, NULL); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 423, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_v_ermsg = ((struct __pyx_obj_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_t_15);
        __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">424</span>:                 frames.append(&lt;void*&gt;erno)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_erno)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 424, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">425</span>:                 frames.append(&lt;void*&gt;ermsg)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_ermsg)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 425, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">426</span>:                 frames.append(&lt;void*&gt;recipient)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_recipient)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 426, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">427</span>:                 frames.append(&lt;void*&gt;subsystem)</pre>
<pre class='cython code score-1 '>        __pyx_t_15 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_frames-&gt;__pyx_vtab)-&gt;append(__pyx_v_frames, ((void *)__pyx_v_subsystem)); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 427, __pyx_L5_except_error)
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">428</span>: </pre>
<pre class="cython line score-13" onclick='toggleDiv(this)'>+<span class="">429</span>:                 try:</pre>
<pre class='cython code score-13 '>        {
          /*try:*/ {
/* … */
          }
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_13); __pyx_t_13 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_12); __pyx_t_12 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_11); __pyx_t_11 = 0;
          goto __pyx_L39_try_end;
          __pyx_L32_error:;
          __Pyx_PyThreadState_assign
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
/* … */
          __Pyx_PyThreadState_assign
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_13, __pyx_t_12, __pyx_t_11);
          goto __pyx_L5_except_error;
          __pyx_L33_exception_handled:;
          __Pyx_PyThreadState_assign
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_13);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_12);
          <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_13, __pyx_t_12, __pyx_t_11);
          __pyx_L39_try_end:;
        }
</pre><pre class="cython line score-33" onclick='toggleDiv(this)'>+<span class="">430</span>:                     socket.send_multipart(frames, flags=NOBLOCK, copy=False)</pre>
<pre class='cython code score-33 '>            __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_socket), __pyx_n_s_send_multipart); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
            __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
            <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_frames));
            __pyx_t_3 = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            __pyx_t_21 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_NOBLOCK); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
            if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_flags, __pyx_t_21) &lt; 0) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
            if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_copy, Py_False) &lt; 0) __PYX_ERR(0, 430, __pyx_L32_error)
            __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_15, __pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 430, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
</pre><pre class="cython line score-27" onclick='toggleDiv(this)'>+<span class="">431</span>:                     issue(self.OUTGOING, frames)</pre>
<pre class='cython code score-27 '>            __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_self-&gt;OUTGOING); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 431, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
            __pyx_t_1 = __pyx_v_issue; __pyx_t_15 = NULL;
            __pyx_t_9 = 0;
            if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
              __pyx_t_15 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
              if (likely(__pyx_t_15)) {
                PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
                <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_15);
                <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
                <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
                __pyx_t_9 = 1;
              }
            }
            __pyx_t_14 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_9); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 431, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
            if (__pyx_t_15) {
              <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_15); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_14, 0, __pyx_t_15); __pyx_t_15 = NULL;
            }
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_14, 0+__pyx_t_9, __pyx_t_3);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
            <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_14, 1+__pyx_t_9, ((PyObject *)__pyx_v_frames));
            __pyx_t_3 = 0;
            __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_14, NULL); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 431, __pyx_L32_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">432</span>:                 except ZMQError as exc:</pre>
<pre class='cython code score-11 '>          __pyx_t_21 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ZMQError); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 432, __pyx_L34_except_error)
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
          __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_t_21);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
          if (__pyx_t_10) {
            <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
            if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_21, &amp;__pyx_t_1, &amp;__pyx_t_14) &lt; 0) __PYX_ERR(0, 432, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_21);
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_14);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_exc, __pyx_t_1);
</pre><pre class="cython line score-11" onclick='toggleDiv(this)'>+<span class="">433</span>:                     try:</pre>
<pre class='cython code score-11 '>            {
              /*try:*/ {
/* … */
              }
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_24); __pyx_t_24 = 0;
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_25); __pyx_t_25 = 0;
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
              goto __pyx_L49_try_end;
              __pyx_L42_error:;
              __Pyx_PyThreadState_assign
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_27); __pyx_t_27 = 0;
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
              <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
/* … */
              __Pyx_PyThreadState_assign
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_24);
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_25);
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_26);
              <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_24, __pyx_t_25, __pyx_t_26);
              goto __pyx_L34_except_error;
              __pyx_L43_exception_handled:;
              __Pyx_PyThreadState_assign
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_24);
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_25);
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_26);
              <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_t_24, __pyx_t_25, __pyx_t_26);
              __pyx_L49_try_end:;
            }
</pre><pre class="cython line score-75" onclick='toggleDiv(this)'>+<span class="">434</span>:                         errnum, errmsg = error = _ROUTE_ERRORS[exc.errno]</pre>
<pre class='cython code score-75 '>                __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ROUTE_ERRORS); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 434, __pyx_L42_error)
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
                __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 434, __pyx_L42_error)
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
                __pyx_t_23 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_t_3, __pyx_t_15); if (unlikely(!__pyx_t_23)) __PYX_ERR(0, 434, __pyx_L42_error)
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_23);
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
                if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_23))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_23))) {
                  PyObject* sequence = __pyx_t_23;
                  #if CYTHON_COMPILING_IN_CPYTHON
                  Py_ssize_t size = Py_SIZE(sequence);
                  #else
                  Py_ssize_t size = <span class='py_c_api'>PySequence_Size</span>(sequence);
                  #endif
                  if (unlikely(size != 2)) {
                    if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
                    else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
                    __PYX_ERR(0, 434, __pyx_L42_error)
                  }
                  #if CYTHON_COMPILING_IN_CPYTHON
                  if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
                    __pyx_t_15 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
                    __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
                  } else {
                    __pyx_t_15 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
                    __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
                  }
                  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_15);
                  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
                  #else
                  __pyx_t_15 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 434, __pyx_L42_error)
                  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
                  __pyx_t_3 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 434, __pyx_L42_error)
                  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
                  #endif
                } else {
                  Py_ssize_t index = -1;
                  __pyx_t_27 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_23); if (unlikely(!__pyx_t_27)) __PYX_ERR(0, 434, __pyx_L42_error)
                  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_27);
                  __pyx_t_16 = Py_TYPE(__pyx_t_27)-&gt;tp_iternext;
                  index = 0; __pyx_t_15 = __pyx_t_16(__pyx_t_27); if (unlikely(!__pyx_t_15)) goto __pyx_L50_unpacking_failed;
                  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
                  index = 1; __pyx_t_3 = __pyx_t_16(__pyx_t_27); if (unlikely(!__pyx_t_3)) goto __pyx_L50_unpacking_failed;
                  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
                  if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_16(__pyx_t_27), 2) &lt; 0) __PYX_ERR(0, 434, __pyx_L42_error)
                  __pyx_t_16 = NULL;
                  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_27); __pyx_t_27 = 0;
                  goto __pyx_L51_unpacking_done;
                  __pyx_L50_unpacking_failed:;
                  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_27); __pyx_t_27 = 0;
                  __pyx_t_16 = NULL;
                  if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
                  __PYX_ERR(0, 434, __pyx_L42_error)
                  __pyx_L51_unpacking_done:;
                }
                __pyx_t_18 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_15); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 434, __pyx_L42_error)
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
                __pyx_t_17 = <span class='pyx_c_api'>__pyx_convert_string_from_py_std__in_string</span>(__pyx_t_3); if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>())) __PYX_ERR(0, 434, __pyx_L42_error)
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
                __pyx_v_errnum = __pyx_t_18;
                __pyx_v_errmsg = __pyx_t_17;
                <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_23);
                <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_error, __pyx_t_23);
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
</pre><pre class="cython line score-6" onclick='toggleDiv(this)'>+<span class="">435</span>:                     except KeyError:</pre>
<pre class='cython code score-6 '>              __pyx_t_10 = <span class='pyx_c_api'>__Pyx_PyErr_ExceptionMatches</span>(__pyx_builtin_KeyError);
              if (__pyx_t_10) {
                <span class='pyx_c_api'>__Pyx_AddTraceback</span>("volttron.platform.vip.router.routercy.BaseRouter._send", __pyx_clineno, __pyx_lineno, __pyx_filename);
                if (<span class='pyx_c_api'>__Pyx_GetException</span>(&amp;__pyx_t_23, &amp;__pyx_t_3, &amp;__pyx_t_15) &lt; 0) __PYX_ERR(0, 435, __pyx_L44_except_error)
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_23);
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
                <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
</pre><pre class="cython line score-5" onclick='toggleDiv(this)'>+<span class="">436</span>:                         error = None</pre>
<pre class='cython code score-5 '>                <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
                <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_error, Py_None);
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
                <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
                goto __pyx_L43_exception_handled;
              }
              goto __pyx_L44_except_error;
              __pyx_L44_except_error:;
</pre><pre class="cython line score-0" onclick='toggleDiv(this)'>+<span class="">437</span>:                     if error is None:</pre>
<pre class='cython code score-0 '>            __pyx_t_20 = (__pyx_v_error == Py_None);
            __pyx_t_22 = (__pyx_t_20 != 0);
            if (__pyx_t_22) {
/* … */
            }
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">438</span>:                         raise</pre>
<pre class='cython code score-2 '>              <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_21);
              <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
              <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_t_14);
              <span class='pyx_c_api'>__Pyx_ErrRestoreWithState</span>(__pyx_t_21, __pyx_t_1, __pyx_t_14);
              __pyx_t_21 = 0; __pyx_t_1 = 0; __pyx_t_14 = 0; 
              __PYX_ERR(0, 438, __pyx_L34_except_error)
</pre><pre class="cython line score-29" onclick='toggleDiv(this)'>+<span class="">439</span>:                     issue(ERROR, frames, error)</pre>
<pre class='cython code score-29 '>            __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_ERROR); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 439, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_issue);
            __pyx_t_23 = __pyx_v_issue; __pyx_t_27 = NULL;
            __pyx_t_9 = 0;
            if (CYTHON_COMPILING_IN_CPYTHON &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_23))) {
              __pyx_t_27 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_23);
              if (likely(__pyx_t_27)) {
                PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_23);
                <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_27);
                <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
                <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_23, function);
                __pyx_t_9 = 1;
              }
            }
            __pyx_t_28 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_9); if (unlikely(!__pyx_t_28)) __PYX_ERR(0, 439, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_28);
            if (__pyx_t_27) {
              <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_27); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_28, 0, __pyx_t_27); __pyx_t_27 = NULL;
            }
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_28, 0+__pyx_t_9, __pyx_t_3);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_frames));
            <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_frames));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_28, 1+__pyx_t_9, ((PyObject *)__pyx_v_frames));
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_error);
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_error);
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_28, 2+__pyx_t_9, __pyx_v_error);
            __pyx_t_3 = 0;
            __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_23, __pyx_t_28, NULL); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 439, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_28); __pyx_t_28 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
</pre><pre class="cython line score-17" onclick='toggleDiv(this)'>+<span class="">440</span>:                     if exc.errno == EHOSTUNREACH:</pre>
<pre class='cython code score-17 '>            __pyx_t_15 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_exc, __pyx_n_s_errno); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 440, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_15);
            __pyx_t_23 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_EHOSTUNREACH); if (unlikely(!__pyx_t_23)) __PYX_ERR(0, 440, __pyx_L34_except_error)
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_23);
            __pyx_t_28 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_15, __pyx_t_23, Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_28); if (unlikely(!__pyx_t_28)) __PYX_ERR(0, 440, __pyx_L34_except_error)
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_15); __pyx_t_15 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_23); __pyx_t_23 = 0;
            __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_28); if (unlikely(__pyx_t_22 &lt; 0)) __PYX_ERR(0, 440, __pyx_L34_except_error)
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_28); __pyx_t_28 = 0;
            if (__pyx_t_22) {
/* … */
            }
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_21); __pyx_t_21 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_14); __pyx_t_14 = 0;
            goto __pyx_L33_exception_handled;
          }
          goto __pyx_L34_except_error;
          __pyx_L34_except_error:;
</pre><pre class="cython line score-10" onclick='toggleDiv(this)'>+<span class="">441</span>:                         sendr = sender.bytes()</pre>
<pre class='cython code score-10 '>              __pyx_t_28 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_9cymessage_Frame *)__pyx_v_sender-&gt;__pyx_vtab)-&gt;bytes(__pyx_v_sender); if (unlikely(!__pyx_t_28)) __PYX_ERR(0, 441, __pyx_L34_except_error)
              <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_28);
              if (!(likely(<span class='py_c_api'>PyBytes_CheckExact</span>(__pyx_t_28))||((__pyx_t_28) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected %.16s, got %.200s", "bytes", Py_TYPE(__pyx_t_28)-&gt;tp_name), 0))) __PYX_ERR(0, 441, __pyx_L34_except_error)
              __pyx_v_sendr = ((PyObject*)__pyx_t_28);
              __pyx_t_28 = 0;
</pre><pre class="cython line score-1" onclick='toggleDiv(this)'>+<span class="">442</span>:                         drop.append(&lt;void*&gt;sendr)</pre>
<pre class='cython code score-1 '>              __pyx_t_28 = ((struct __pyx_vtabstruct_8volttron_8platform_3vip_6router_5queue_Queue *)__pyx_v_drop-&gt;__pyx_vtab)-&gt;append(__pyx_v_drop, ((void *)__pyx_v_sendr)); if (unlikely(!__pyx_t_28)) __PYX_ERR(0, 442, __pyx_L34_except_error)
              <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_28);
              <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_28); __pyx_t_28 = 0;
</pre><pre class="cython line score-2" onclick='toggleDiv(this)'>+<span class="">443</span>:         return drop</pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_drop));
  __pyx_r = __pyx_v_drop;
  goto __pyx_L0;
</pre></div></body></html>
